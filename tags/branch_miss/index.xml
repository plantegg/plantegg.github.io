<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>Branch_miss - 标签 - plantegg</title>
        <link>http://localhost:1313/tags/branch_miss/</link>
        <description>Branch_miss - 标签 - plantegg</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-Hans</language><lastBuildDate>Sun, 16 Apr 2023 12:30:03 &#43;0000</lastBuildDate><atom:link href="http://localhost:1313/tags/branch_miss/" rel="self" type="application/rss+xml" /><item>
    <title>比较不同CPU下的分支预测</title>
    <link>http://localhost:1313/posts/%E6%AF%94%E8%BE%83%E4%B8%8D%E5%90%8Ccpu%E4%B8%8B%E7%9A%84%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B/</link>
    <pubDate>Sun, 16 Apr 2023 12:30:03 &#43;0000</pubDate><author>
        <name>作者</name>
    </author><guid>http://localhost:1313/posts/%E6%AF%94%E8%BE%83%E4%B8%8D%E5%90%8Ccpu%E4%B8%8B%E7%9A%84%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B/</guid>
    <description><![CDATA[<h1 id="比较不同cpu下的分支预测" class="headerLink">
    <a href="#%e6%af%94%e8%be%83%e4%b8%8d%e5%90%8ccpu%e4%b8%8b%e7%9a%84%e5%88%86%e6%94%af%e9%a2%84%e6%b5%8b" class="header-mark"></a>比较不同CPU下的分支预测</h1><h2 id="目的" class="headerLink">
    <a href="#%e7%9b%ae%e7%9a%84" class="header-mark"></a>目的</h2><p>本文通过一段对分支预测是否友好的代码来验证 branch load miss 差异，已经最终带来的 性能差异。同时在x86和aarch64 下各选几款CPU共5款进行差异性对比</p>
<h2 id="cpu-情况" class="headerLink">
    <a href="#cpu-%e6%83%85%e5%86%b5" class="header-mark"></a>CPU 情况</h2><h3 id="intel-x86" class="headerLink">
    <a href="#intel-x86" class="header-mark"></a>intel x86</h3><div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-1" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl"><span class="c1">#lscpu</span>
</span></span><span class="line"><span class="cl"><span class="n">Architecture</span><span class="p">:</span>          <span class="n">x86_64</span>
</span></span><span class="line"><span class="cl"><span class="n">CPU</span> <span class="n">op</span><span class="o">-</span><span class="n">mode</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>        <span class="mi">32</span><span class="o">-</span><span class="n">bit</span><span class="p">,</span> <span class="mi">64</span><span class="o">-</span><span class="n">bit</span>
</span></span><span class="line"><span class="cl"><span class="n">Byte</span> <span class="n">Order</span><span class="p">:</span>            <span class="n">Little</span> <span class="n">Endian</span>
</span></span><span class="line"><span class="cl"><span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>                <span class="mi">48</span>
</span></span><span class="line"><span class="cl"><span class="n">On</span><span class="o">-</span><span class="n">line</span> <span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">list</span><span class="p">:</span>   <span class="mi">0</span><span class="o">-</span><span class="mi">47</span>
</span></span><span class="line"><span class="cl"><span class="ne">Thread</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">per</span> <span class="n">core</span><span class="p">:</span>    <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">Core</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">per</span> <span class="n">socket</span><span class="p">:</span>    <span class="mi">24</span>
</span></span><span class="line"><span class="cl"><span class="n">Socket</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>             <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">NUMA</span> <span class="n">node</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>          <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">Vendor</span> <span class="n">ID</span><span class="p">:</span>             <span class="n">GenuineIntel</span>
</span></span><span class="line"><span class="cl"><span class="n">CPU</span> <span class="n">family</span><span class="p">:</span>            <span class="mi">6</span>
</span></span><span class="line"><span class="cl"><span class="n">Model</span><span class="p">:</span>                 <span class="mi">85</span>
</span></span><span class="line"><span class="cl"><span class="n">Model</span> <span class="n">name</span><span class="p">:</span>            <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">Xeon</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">Platinum</span> <span class="mi">8163</span> <span class="n">CPU</span> <span class="err">@</span> <span class="mf">2.50</span><span class="n">GHz</span>
</span></span><span class="line"><span class="cl"><span class="n">Stepping</span><span class="p">:</span>              <span class="mi">4</span>
</span></span><span class="line"><span class="cl"><span class="n">CPU</span> <span class="n">MHz</span><span class="p">:</span>               <span class="mf">2500.195</span>
</span></span><span class="line"><span class="cl"><span class="n">CPU</span> <span class="nb">max</span> <span class="n">MHz</span><span class="p">:</span>           <span class="mf">3100.0000</span>
</span></span><span class="line"><span class="cl"><span class="n">CPU</span> <span class="nb">min</span> <span class="n">MHz</span><span class="p">:</span>           <span class="mf">1000.0000</span>
</span></span><span class="line"><span class="cl"><span class="n">BogoMIPS</span><span class="p">:</span>              <span class="mf">4998.89</span>
</span></span><span class="line"><span class="cl"><span class="n">Virtualization</span><span class="p">:</span>        <span class="n">VT</span><span class="o">-</span><span class="n">x</span>
</span></span><span class="line"><span class="cl"><span class="n">L1d</span> <span class="n">cache</span><span class="p">:</span>             <span class="mi">32</span><span class="n">K</span>
</span></span><span class="line"><span class="cl"><span class="n">L1i</span> <span class="n">cache</span><span class="p">:</span>             <span class="mi">32</span><span class="n">K</span>
</span></span><span class="line"><span class="cl"><span class="n">L2</span> <span class="n">cache</span><span class="p">:</span>              <span class="mi">1024</span><span class="n">K</span>
</span></span><span class="line"><span class="cl"><span class="n">L3</span> <span class="n">cache</span><span class="p">:</span>              <span class="mi">33792</span><span class="n">K</span>
</span></span><span class="line"><span class="cl"><span class="n">NUMA</span> <span class="n">node0</span> <span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>     <span class="mi">0</span><span class="o">-</span><span class="mi">23</span>
</span></span><span class="line"><span class="cl"><span class="n">NUMA</span> <span class="n">node1</span> <span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>     <span class="mi">24</span><span class="o">-</span><span class="mi">47</span>
</span></span><span class="line"><span class="cl"><span class="n">Flags</span><span class="p">:</span>                 <span class="n">fpu</span> <span class="n">vme</span> <span class="n">de</span> <span class="n">pse</span> <span class="n">tsc</span> <span class="n">msr</span> <span class="n">pae</span> <span class="n">mce</span> <span class="n">cx8</span> <span class="n">apic</span> <span class="n">sep</span> <span class="n">mtrr</span> <span class="n">pge</span> <span class="n">mca</span> <span class="n">cmov</span> <span class="n">pat</span> <span class="n">pse36</span> <span class="n">clflush</span> <span class="n">dts</span> <span class="n">acpi</span> <span class="n">mmx</span> <span class="n">fxsr</span> <span class="n">sse</span> <span class="n">sse2</span> <span class="n">ss</span> <span class="n">ht</span> <span class="n">tm</span> <span class="n">pbe</span> <span class="n">syscall</span> <span class="n">nx</span> <span class="n">pdpe1gb</span> <span class="n">rdtscp</span> <span class="n">lm</span> <span class="n">constant_tsc</span> <span class="n">arch_perfmon</span> <span class="n">pebs</span> <span class="n">bts</span> <span class="n">rep_good</span> <span class="n">nopl</span> <span class="n">xtopology</span> <span class="n">nonstop_tsc</span> <span class="n">aperfmperf</span> <span class="n">eagerfpu</span> <span class="n">pni</span> <span class="n">pclmulqdq</span> <span class="n">dtes64</span> <span class="n">monitor</span> <span class="n">ds_cpl</span> <span class="n">vmx</span> <span class="n">smx</span> <span class="n">est</span> <span class="n">tm2</span> <span class="n">ssse3</span> <span class="n">fma</span> <span class="n">cx16</span> <span class="n">xtpr</span> <span class="n">pdcm</span> <span class="n">pcid</span> <span class="n">dca</span> <span class="n">sse4_1</span> <span class="n">sse4_2</span> <span class="n">x2apic</span> <span class="n">movbe</span> <span class="n">popcnt</span> <span class="n">tsc_deadline_timer</span> <span class="n">aes</span> <span class="n">xsave</span> <span class="n">avx</span> <span class="n">f16c</span> <span class="n">rdrand</span> <span class="n">lahf_lm</span> <span class="n">abm</span> <span class="mi">3</span><span class="n">dnowprefetch</span> <span class="n">ida</span> <span class="n">arat</span> <span class="n">epb</span> <span class="n">invpcid_single</span> <span class="n">pln</span> <span class="n">pts</span> <span class="n">dtherm</span> <span class="n">spec_ctrl</span> <span class="n">ibpb_support</span> <span class="n">tpr_shadow</span> <span class="n">vnmi</span> <span class="n">flexpriority</span> <span class="n">ept</span> <span class="n">vpid</span> <span class="n">fsgsbase</span> <span class="n">tsc_adjust</span> <span class="n">bmi1</span> <span class="n">hle</span> <span class="n">avx2</span> <span class="n">smep</span> <span class="n">bmi2</span> <span class="n">erms</span> <span class="n">invpcid</span> <span class="n">rtm</span> <span class="n">cqm</span> <span class="n">mpx</span> <span class="n">rdt</span> <span class="n">avx512f</span> <span class="n">avx512dq</span> <span class="n">rdseed</span> <span class="n">adx</span> <span class="n">smap</span> <span class="n">clflushopt</span> <span class="n">avx512cd</span> <span class="n">avx512bw</span> <span class="n">avx512vl</span> <span class="n">xsaveopt</span> <span class="n">xsavec</span> <span class="n">xgetbv1</span> <span class="n">cqm_llc</span> <span class="n">cqm_occup_llc</span> <span class="n">cqm_mbm_total</span> <span class="n">cqm_mbm_local</span> <span class="n">cat_l3</span> <span class="n">mba</span></span></span></code></pre>
</div>
<h3 id="hygon-7260" class="headerLink">
    <a href="#hygon-7260" class="header-mark"></a>hygon 7260</h3><div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-2" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl">#lscpu
</span></span><span class="line"><span class="cl">Architecture:        x86_64
</span></span><span class="line"><span class="cl">CPU op-mode(s):      32-bit, 64-bit
</span></span><span class="line"><span class="cl">Byte Order:          Little Endian
</span></span><span class="line"><span class="cl">Address sizes:       43 bits physical, 48 bits virtual
</span></span><span class="line"><span class="cl">CPU(s):              48
</span></span><span class="line"><span class="cl">On-line CPU(s) list: 0-47
</span></span><span class="line"><span class="cl">Thread(s) per core:  1
</span></span><span class="line"><span class="cl">Core(s) per socket:  24
</span></span><span class="line"><span class="cl">Socket(s):           2
</span></span><span class="line"><span class="cl">NUMA node(s):        8
</span></span><span class="line"><span class="cl">Vendor ID:           HygonGenuine
</span></span><span class="line"><span class="cl">CPU family:          24
</span></span><span class="line"><span class="cl">Model:               1
</span></span><span class="line"><span class="cl">Model name:          Hygon C86 7260 24-core Processor
</span></span><span class="line"><span class="cl">Stepping:            1
</span></span><span class="line"><span class="cl">Frequency boost:     enabled
</span></span><span class="line"><span class="cl">CPU MHz:             1069.534
</span></span><span class="line"><span class="cl">CPU max MHz:         2200.0000
</span></span><span class="line"><span class="cl">CPU min MHz:         1200.0000
</span></span><span class="line"><span class="cl">BogoMIPS:            4399.38
</span></span><span class="line"><span class="cl">Virtualization:      AMD-V
</span></span><span class="line"><span class="cl">L1d cache:           32K
</span></span><span class="line"><span class="cl">L1i cache:           64K
</span></span><span class="line"><span class="cl">L2 cache:            512K
</span></span><span class="line"><span class="cl">L3 cache:            8192K
</span></span><span class="line"><span class="cl">NUMA node0 CPU(s):   0-5
</span></span><span class="line"><span class="cl">NUMA node1 CPU(s):   6-11
</span></span><span class="line"><span class="cl">NUMA node2 CPU(s):   12-17
</span></span><span class="line"><span class="cl">NUMA node3 CPU(s):   18-23
</span></span><span class="line"><span class="cl">NUMA node4 CPU(s):   24-29
</span></span><span class="line"><span class="cl">NUMA node5 CPU(s):   30-35
</span></span><span class="line"><span class="cl">NUMA node6 CPU(s):   36-41
</span></span><span class="line"><span class="cl">NUMA node7 CPU(s):   42-47</span></span></code></pre>
</div>
<h3 id="arm-鲲鹏920" class="headerLink">
    <a href="#arm-%e9%b2%b2%e9%b9%8f920" class="header-mark"></a>ARM 鲲鹏920</h3><div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-3" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl">#lscpu
</span></span><span class="line"><span class="cl">Architecture:          aarch64
</span></span><span class="line"><span class="cl">Byte Order:            Little Endian
</span></span><span class="line"><span class="cl">CPU(s):                96
</span></span><span class="line"><span class="cl">On-line CPU(s) list:   0-95
</span></span><span class="line"><span class="cl">Thread(s) per core:    1
</span></span><span class="line"><span class="cl">Core(s) per socket:    48
</span></span><span class="line"><span class="cl">Socket(s):             2
</span></span><span class="line"><span class="cl">NUMA node(s):          4
</span></span><span class="line"><span class="cl">Model:                 0
</span></span><span class="line"><span class="cl">CPU max MHz:           2600.0000
</span></span><span class="line"><span class="cl">CPU min MHz:           200.0000
</span></span><span class="line"><span class="cl">BogoMIPS:              200.00
</span></span><span class="line"><span class="cl">L1d cache:             64K
</span></span><span class="line"><span class="cl">L1i cache:             64K
</span></span><span class="line"><span class="cl">L2 cache:              512K
</span></span><span class="line"><span class="cl">L3 cache:              24576K
</span></span><span class="line"><span class="cl">NUMA node0 CPU(s):     0-23
</span></span><span class="line"><span class="cl">NUMA node1 CPU(s):     24-47
</span></span><span class="line"><span class="cl">NUMA node2 CPU(s):     48-71
</span></span><span class="line"><span class="cl">NUMA node3 CPU(s):     72-95
</span></span><span class="line"><span class="cl">Flags:                 fp asimd evtstrm aes pmull sha1 sha2 crc32 atomics fphp asimdhp cpuid asimdrdm jscvt fcma dcpop asimddp asimdfhm</span></span></code></pre>
</div>
<h3 id="arm-m710" class="headerLink">
    <a href="#arm-m710" class="header-mark"></a>ARM M710</h3><div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-4" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl">#lscpu
</span></span><span class="line"><span class="cl">Architecture:          aarch64
</span></span><span class="line"><span class="cl">Byte Order:            Little Endian
</span></span><span class="line"><span class="cl">CPU(s):                128
</span></span><span class="line"><span class="cl">On-line CPU(s) list:   0-127
</span></span><span class="line"><span class="cl">Thread(s) per core:    1
</span></span><span class="line"><span class="cl">Core(s) per socket:    128
</span></span><span class="line"><span class="cl">Socket(s):             1
</span></span><span class="line"><span class="cl">NUMA node(s):          2
</span></span><span class="line"><span class="cl">Model:                 0
</span></span><span class="line"><span class="cl">BogoMIPS:              100.00
</span></span><span class="line"><span class="cl">L1d cache:             64K
</span></span><span class="line"><span class="cl">L1i cache:             64K
</span></span><span class="line"><span class="cl">L2 cache:              1024K
</span></span><span class="line"><span class="cl">L3 cache:              65536K
</span></span><span class="line"><span class="cl">NUMA node0 CPU(s):     0-63
</span></span><span class="line"><span class="cl">NUMA node1 CPU(s):     64-127
</span></span><span class="line"><span class="cl">Flags:                 fp asimd evtstrm aes pmull sha1 sha2 crc32 atomics fphp asimdhp cpuid asimdrdm jscvt fcma lrcpc dcpop sha3 sm3 sm4 asimddp sha512 sve asimdfhm dit uscat ilrcpc flagm ssbs sb dcpodp sve2 sveaes svepmull svebitperm svesha3 svesm4 flagm2 frint svei8mm svebf16 i8mm bf16 dgh</span></span></code></pre>
</div>
<h3 id="arm-ft-s2500" class="headerLink">
    <a href="#arm-ft-s2500" class="header-mark"></a>ARM FT S2500</h3><div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-5" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl">#lscpu
</span></span><span class="line"><span class="cl">Architecture:          aarch64
</span></span><span class="line"><span class="cl">Byte Order:            Little Endian
</span></span><span class="line"><span class="cl">CPU(s):                128
</span></span><span class="line"><span class="cl">On-line CPU(s) list:   0-127
</span></span><span class="line"><span class="cl">Thread(s) per core:    1
</span></span><span class="line"><span class="cl">Core(s) per socket:    64
</span></span><span class="line"><span class="cl">Socket(s):             2
</span></span><span class="line"><span class="cl">NUMA node(s):          16
</span></span><span class="line"><span class="cl">Model:                 3
</span></span><span class="line"><span class="cl">BogoMIPS:              100.00
</span></span><span class="line"><span class="cl">L1d cache:             32K
</span></span><span class="line"><span class="cl">L1i cache:             32K
</span></span><span class="line"><span class="cl">L2 cache:              2048K
</span></span><span class="line"><span class="cl">L3 cache:              65536K
</span></span><span class="line"><span class="cl">NUMA node0 CPU(s):     0-7
</span></span><span class="line"><span class="cl">NUMA node1 CPU(s):     8-15
</span></span><span class="line"><span class="cl">NUMA node2 CPU(s):     16-23
</span></span><span class="line"><span class="cl">NUMA node3 CPU(s):     24-31
</span></span><span class="line"><span class="cl">NUMA node4 CPU(s):     32-39
</span></span><span class="line"><span class="cl">NUMA node5 CPU(s):     40-47
</span></span><span class="line"><span class="cl">NUMA node6 CPU(s):     48-55
</span></span><span class="line"><span class="cl">NUMA node7 CPU(s):     56-63
</span></span><span class="line"><span class="cl">NUMA node8 CPU(s):     64-71
</span></span><span class="line"><span class="cl">NUMA node9 CPU(s):     72-79
</span></span><span class="line"><span class="cl">NUMA node10 CPU(s):    80-87
</span></span><span class="line"><span class="cl">NUMA node11 CPU(s):    88-95
</span></span><span class="line"><span class="cl">NUMA node12 CPU(s):    96-103
</span></span><span class="line"><span class="cl">NUMA node13 CPU(s):    104-111
</span></span><span class="line"><span class="cl">NUMA node14 CPU(s):    112-119
</span></span><span class="line"><span class="cl">NUMA node15 CPU(s):    120-127
</span></span><span class="line"><span class="cl">Flags:                 fp asimd evtstrm aes pmull sha1 sha2 crc32 cpuid</span></span></code></pre>
</div>
<h2 id="测试代码httpsstackoverflowcomquestions11227809why-is-processing-a-sorted-array-faster-than-processing-an-unsorted-array" class="headerLink">
    <a href="#%e6%b5%8b%e8%af%95%e4%bb%a3%e7%a0%81httpsstackoverflowcomquestions11227809why-is-processing-a-sorted-array-faster-than-processing-an-unsorted-array" class="header-mark"></a><a href="https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-processing-an-unsorted-array" target="_blank" rel="noopener noreferrer">测试代码</a></h2><p>对一个数组中较大的一半的值累加：</p>
<div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">c&#43;&#43;</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-6" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;ctime&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 随机产生整数，用分区函数填充，以避免出现分桶不均
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">const</span> <span class="kt">unsigned</span> <span class="n">arraySize</span> <span class="o">=</span> <span class="mi">32768</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">data</span><span class="p">[</span><span class="n">arraySize</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">arraySize</span><span class="p">;</span> <span class="o">++</span><span class="n">c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">data</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">rand</span><span class="p">()</span> <span class="o">%</span> <span class="mi">256</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//排序后数据有序，CPU可以准确预测到if的分支
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">data</span> <span class="o">+</span> <span class="n">arraySize</span><span class="p">);</span> <span class="c1">//预先排序，也可以注释掉，注释掉表示随机乱序几乎无法预测
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 测试部分
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">clock_t</span> <span class="n">start</span> <span class="o">=</span> <span class="n">clock</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">long</span> <span class="kt">long</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">100000</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 主要计算部分，选一半元素参与计算
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">arraySize</span><span class="p">;</span> <span class="o">++</span><span class="n">c</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">128</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">sum</span> <span class="o">+=</span> <span class="n">data</span><span class="p">[</span><span class="n">c</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">elapsedTime</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="n">clock</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span> <span class="o">/</span> <span class="n">CLOCKS_PER_SEC</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">elapsedTime</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;sum = &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">sum</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre>
</div>
<p>以上代码可以注释掉第15行，也就是不对代码排序直接累加，不排序的话 if (data[c] &gt;= 128) 有50% 概率成立，排序后前一半元素if都不成立，后一半元素if都成立，导致CPU流水线很好预测后面的代码，可以提前加载运算打高IPC</p>
<h2 id="测试结果" class="headerLink">
    <a href="#%e6%b5%8b%e8%af%95%e7%bb%93%e6%9e%9c" class="header-mark"></a>测试结果</h2><h3 id="aarch64-鲲鹏920" class="headerLink">
    <a href="#aarch64-%e9%b2%b2%e9%b9%8f920" class="header-mark"></a>aarch64 鲲鹏920</h3><div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-7" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-misses,bus-cycles,cache-misses,cache-references,cpu-cycles,instructions,stalled-cycles-backend,stalled-cycles-frontend,alignment-faults,bpf-output,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-dcache-store-misses,L1-dcache-stores,L1-icache-load-misses,L1-icache-loads,branch-load-misses,branch-loads,dTLB-load-misses,dTLB-loads,iTLB-load-misses,iTLB-loads ./aftersort</span>
</span></span><span class="line"><span class="cl"><span class="mf">11.44</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">           <span class="mi">470</span><span class="p">,</span><span class="mi">740</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>                                                 <span class="p">(</span><span class="mf">59.99</span><span class="o">%</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">29</span><span class="p">,</span><span class="mi">716</span><span class="p">,</span><span class="mi">627</span><span class="p">,</span><span class="mi">485</span>      <span class="n">bus</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1"># 2595.890 M/sec                    (60.03%)</span>
</span></span><span class="line"><span class="cl">        <span class="mi">96</span><span class="p">,</span><span class="mi">469</span><span class="p">,</span><span class="mi">435</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#    0.420 % of all cache refs      (60.03%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">22</span><span class="p">,</span><span class="mi">984</span><span class="p">,</span><span class="mi">316</span><span class="p">,</span><span class="mi">728</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1"># 2007.791 M/sec                    (60.03%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">29</span><span class="p">,</span><span class="mi">716</span><span class="p">,</span><span class="mi">018</span><span class="p">,</span><span class="mi">641</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.596 GHz                      (65.02%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">83</span><span class="p">,</span><span class="mi">666</span><span class="p">,</span><span class="mi">813</span><span class="p">,</span><span class="mi">837</span>      <span class="n">instructions</span>              <span class="c1">#    2.82  insn per cycle</span>
</span></span><span class="line"><span class="cl">                                                  <span class="c1">#    0.10  stalled cycles per insn  (65.02%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">8</span><span class="p">,</span><span class="mi">765</span><span class="p">,</span><span class="mi">807</span><span class="p">,</span><span class="mi">804</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">backend</span>    <span class="c1">#   29.50% backend cycles idle      (65.02%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">8</span><span class="p">,</span><span class="mi">917</span><span class="p">,</span><span class="mi">112</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">frontend</span>   <span class="c1">#    0.03% frontend cycles idle     (65.02%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">bpf</span><span class="o">-</span><span class="n">output</span>                <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">5</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">         <span class="mi">11</span><span class="p">,</span><span class="mf">447.57</span> <span class="n">msec</span> <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span>                 <span class="c1">#    1.000 CPUs utilized</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">132</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.012 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">132</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.012 K/sec</span>
</span></span><span class="line"><span class="cl">         <span class="mi">11</span><span class="p">,</span><span class="mf">447.57</span> <span class="n">msec</span> <span class="n">task</span><span class="o">-</span><span class="n">clock</span>                <span class="c1">#    1.000 CPUs utilized</span>
</span></span><span class="line"><span class="cl">        <span class="mi">96</span><span class="p">,</span><span class="mi">471</span><span class="p">,</span><span class="mi">779</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.42% of all L1-dcache accesses  (65.02%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">22</span><span class="p">,</span><span class="mi">985</span><span class="p">,</span><span class="mi">408</span><span class="p">,</span><span class="mi">745</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 2007.886 M/sec                    (65.02%)</span>
</span></span><span class="line"><span class="cl">        <span class="mi">96</span><span class="p">,</span><span class="mi">472</span><span class="p">,</span><span class="mi">614</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>    <span class="c1">#    8.427 M/sec                    (65.02%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">22</span><span class="p">,</span><span class="mi">986</span><span class="p">,</span><span class="mi">056</span><span class="p">,</span><span class="mi">706</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">stores</span>          <span class="c1"># 2007.943 M/sec                    (65.02%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">184</span><span class="p">,</span><span class="mi">402</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.00% of all L1-icache accesses  (65.02%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">14</span><span class="p">,</span><span class="mi">779</span><span class="p">,</span><span class="mi">996</span><span class="p">,</span><span class="mi">797</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 1291.104 M/sec                    (64.99%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">330</span><span class="p">,</span><span class="mi">651</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#    0.029 M/sec                    (64.96%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">6</span><span class="p">,</span><span class="mi">561</span><span class="p">,</span><span class="mi">353</span><span class="p">,</span><span class="mi">921</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1">#  573.166 M/sec                    (64.96%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">3</span><span class="p">,</span><span class="mi">464</span><span class="p">,</span><span class="mi">612</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.02% of all dTLB cache accesses  (64.96%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">23</span><span class="p">,</span><span class="mi">008</span><span class="p">,</span><span class="mi">097</span><span class="p">,</span><span class="mi">187</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1"># 2009.868 M/sec                    (59.96%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">745</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.00% of all iTLB cache accesses  (59.96%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">14</span><span class="p">,</span><span class="mi">779</span><span class="p">,</span><span class="mi">577</span><span class="p">,</span><span class="mi">851</span>      <span class="n">iTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1"># 1291.067 M/sec                    (59.96%)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-misses,bus-cycles,cache-misses,cache-references,cpu-cycles,instructions,stalled-cycles-backend,stalled-cycles-frontend,alignment-faults,bpf-output,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-dcache-store-misses,L1-dcache-stores,L1-icache-load-misses,L1-icache-loads,branch-load-misses,branch-loads,dTLB-load-misses,dTLB-loads,iTLB-load-misses,iTLB-loads ./beforesort</span>
</span></span><span class="line"><span class="cl"><span class="mf">30.92</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">639</span><span class="p">,</span><span class="mi">558</span><span class="p">,</span><span class="mi">981</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>                                                 <span class="p">(</span><span class="mf">59.96</span><span class="o">%</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">80</span><span class="p">,</span><span class="mi">284</span><span class="p">,</span><span class="mi">783</span><span class="p">,</span><span class="mi">419</span>      <span class="n">bus</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1"># 2595.949 M/sec                    (59.96%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">118</span><span class="p">,</span><span class="mi">459</span><span class="p">,</span><span class="mi">436</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#    0.356 % of all cache refs      (59.96%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">33</span><span class="p">,</span><span class="mi">285</span><span class="p">,</span><span class="mi">701</span><span class="p">,</span><span class="mi">200</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1"># 1076.269 M/sec                    (59.96%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">80</span><span class="p">,</span><span class="mi">283</span><span class="p">,</span><span class="mi">427</span><span class="p">,</span><span class="mi">379</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.596 GHz                      (64.96%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">83</span><span class="p">,</span><span class="mi">694</span><span class="p">,</span><span class="mi">841</span><span class="p">,</span><span class="mi">472</span>      <span class="n">instructions</span>              <span class="c1">#    1.04  insn per cycle</span>
</span></span><span class="line"><span class="cl">                                                  <span class="c1">#    0.11  stalled cycles per insn  (64.98%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">8</span><span class="p">,</span><span class="mi">849</span><span class="p">,</span><span class="mi">746</span><span class="p">,</span><span class="mi">372</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">backend</span>    <span class="c1">#   11.02% backend cycles idle      (64.99%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">8</span><span class="p">,</span><span class="mi">064</span><span class="p">,</span><span class="mi">207</span><span class="p">,</span><span class="mi">583</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">frontend</span>   <span class="c1">#   10.04% frontend cycles idle     (65.00%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">bpf</span><span class="o">-</span><span class="n">output</span>                <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                <span class="mi">10</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">         <span class="mi">30</span><span class="p">,</span><span class="mf">926.95</span> <span class="n">msec</span> <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span>                 <span class="c1">#    1.000 CPUs utilized</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">133</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.004 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">133</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.004 K/sec</span>
</span></span><span class="line"><span class="cl">         <span class="mi">30</span><span class="p">,</span><span class="mf">926.95</span> <span class="n">msec</span> <span class="n">task</span><span class="o">-</span><span class="n">clock</span>                <span class="c1">#    1.000 CPUs utilized</span>
</span></span><span class="line"><span class="cl">       <span class="mi">118</span><span class="p">,</span><span class="mi">445</span><span class="p">,</span><span class="mi">576</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.36% of all L1-dcache accesses  (65.02%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">33</span><span class="p">,</span><span class="mi">286</span><span class="p">,</span><span class="mi">586</span><span class="p">,</span><span class="mi">418</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 1076.297 M/sec                    (65.03%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">118</span><span class="p">,</span><span class="mi">441</span><span class="p">,</span><span class="mi">599</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>    <span class="c1">#    3.830 M/sec                    (65.04%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">33</span><span class="p">,</span><span class="mi">286</span><span class="p">,</span><span class="mi">751</span><span class="p">,</span><span class="mi">407</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">stores</span>          <span class="c1"># 1076.302 M/sec                    (65.05%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">410</span><span class="p">,</span><span class="mi">040</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.00% of all L1-icache accesses  (65.05%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">51</span><span class="p">,</span><span class="mi">611</span><span class="p">,</span><span class="mi">031</span><span class="p">,</span><span class="mi">810</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 1668.805 M/sec                    (65.04%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">639</span><span class="p">,</span><span class="mi">731</span><span class="p">,</span><span class="mi">725</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#   53.020 M/sec                    (65.03%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">7</span><span class="p">,</span><span class="mi">520</span><span class="p">,</span><span class="mi">634</span><span class="p">,</span><span class="mi">791</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1">#  243.174 M/sec                    (65.02%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">3</span><span class="p">,</span><span class="mi">536</span><span class="p">,</span><span class="mi">061</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.01% of all dTLB cache accesses  (65.00%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">47</span><span class="p">,</span><span class="mi">898</span><span class="p">,</span><span class="mi">134</span><span class="p">,</span><span class="mi">543</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1"># 1548.751 M/sec                    (59.99%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">2</span><span class="p">,</span><span class="mi">529</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.00% of all iTLB cache accesses  (59.97%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">51</span><span class="p">,</span><span class="mi">612</span><span class="p">,</span><span class="mi">575</span><span class="p">,</span><span class="mi">118</span>      <span class="n">iTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1"># 1668.854 M/sec                    (59.96%)    </span></span></span></code></pre>
</div>
<p>以上在相同CPU下数据对比可以看到核心差异是branch-load-misses和branch-misses，当然最终也体现在 IPC 数值上，排序后IPC更高不是因为数据有序取起来更快，而是因为执行逻辑更容易提前预测，也就是可以提前加载if代码到cache中。符合预期</p>
<h3 id="aarch64-m710" class="headerLink">
    <a href="#aarch64-m710" class="header-mark"></a>aarch64 M710</h3><div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-8" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-misses,bus-cycles,cache-misses,cache-references,cpu-cycles,instructions,stalled-cycles-backend,stalled-cycles-frontend,alignment-faults,bpf-output,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-icache-load-misses,L1-icache-loads,LLC-load-misses,LLC-loads,branch-load-misses,branch-loads,dTLB-load-misses,dTLB-loads,iTLB-load-misses,iTLB-loads ./aftersort</span>
</span></span><span class="line"><span class="cl"><span class="mf">8.20237</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">           <span class="mi">912</span><span class="p">,</span><span class="mi">836</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>                                                 <span class="p">(</span><span class="mf">29.86</span><span class="o">%</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">22</span><span class="p">,</span><span class="mi">560</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">604</span>      <span class="n">bus</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1"># 2748.461 M/sec                    (29.91%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">205</span><span class="p">,</span><span class="mi">068</span><span class="p">,</span><span class="mi">961</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#    0.892 % of all cache refs      (29.96%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">22</span><span class="p">,</span><span class="mi">998</span><span class="p">,</span><span class="mi">186</span><span class="p">,</span><span class="mi">284</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1"># 2801.824 M/sec                    (30.01%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">22</span><span class="p">,</span><span class="mi">559</span><span class="p">,</span><span class="mi">518</span><span class="p">,</span><span class="mi">941</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.748 GHz                      (35.03%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">77</span><span class="p">,</span><span class="mi">068</span><span class="p">,</span><span class="mi">271</span><span class="p">,</span><span class="mi">833</span>      <span class="n">instructions</span>              <span class="c1">#    3.42  insn per cycle</span>
</span></span><span class="line"><span class="cl">                                                  <span class="c1">#    0.06  stalled cycles per insn  (35.08%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">4</span><span class="p">,</span><span class="mi">892</span><span class="p">,</span><span class="mi">933</span><span class="p">,</span><span class="mi">264</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">backend</span>    <span class="c1">#   21.69% backend cycles idle      (35.13%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">963</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">frontend</span>   <span class="c1">#    4.89% frontend cycles idle     (35.13%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">bpf</span><span class="o">-</span><span class="n">output</span>                <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                <span class="mi">17</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.002 K/sec</span>
</span></span><span class="line"><span class="cl">          <span class="mi">8</span><span class="p">,</span><span class="mf">208.29</span> <span class="n">msec</span> <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span>                 <span class="c1">#    1.000 CPUs utilized</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">3</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">227</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.028 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">227</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.028 K/sec</span>
</span></span><span class="line"><span class="cl">          <span class="mi">8</span><span class="p">,</span><span class="mf">208.30</span> <span class="n">msec</span> <span class="n">task</span><span class="o">-</span><span class="n">clock</span>                <span class="c1">#    1.000 CPUs utilized</span>
</span></span><span class="line"><span class="cl">       <span class="mi">205</span><span class="p">,</span><span class="mi">384</span><span class="p">,</span><span class="mi">990</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.89% of all L1-dcache accesses  (35.13%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">22</span><span class="p">,</span><span class="mi">997</span><span class="p">,</span><span class="mi">494</span><span class="p">,</span><span class="mi">522</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 2801.739 M/sec                    (35.13%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">66</span><span class="p">,</span><span class="mi">804</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.00% of all L1-icache accesses  (35.13%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">15</span><span class="p">,</span><span class="mi">486</span><span class="p">,</span><span class="mi">704</span><span class="p">,</span><span class="mi">750</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 1886.715 M/sec                    (30.12%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">76</span><span class="p">,</span><span class="mi">066</span>      <span class="n">LLC</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>           <span class="c1">#    0.00% of all LL-cache accesses  (30.09%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">loads</span>                 <span class="c1">#    0.000 K/sec                    (30.03%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">672</span><span class="p">,</span><span class="mi">231</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#    0.082 M/sec                    (29.98%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">9</span><span class="p">,</span><span class="mi">844</span><span class="p">,</span><span class="mi">109</span><span class="p">,</span><span class="mi">024</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1"># 1199.288 M/sec                    (29.93%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">107</span><span class="p">,</span><span class="mi">198</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.00% of all dTLB cache accesses  (29.89%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">22</span><span class="p">,</span><span class="mi">998</span><span class="p">,</span><span class="mi">647</span><span class="p">,</span><span class="mi">232</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1"># 2801.880 M/sec                    (29.84%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">9</span><span class="p">,</span><span class="mi">497</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.08% of all iTLB cache accesses  (29.81%)</span>
</span></span><span class="line"><span class="cl">        <span class="mi">11</span><span class="p">,</span><span class="mi">755</span><span class="p">,</span><span class="mi">825</span>      <span class="n">iTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    1.432 M/sec                    (29.82%)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       <span class="mf">8.210235171</span> <span class="n">seconds</span> <span class="n">time</span> <span class="n">elapsed</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-misses,bus-cycles,cache-misses,cache-references,cpu-cycles,instructions,stalled-cycles-backend,stalled-cycles-frontend,alignment-faults,bpf-output,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-icache-load-misses,L1-icache-loads,LLC-load-misses,LLC-loads,branch-load-misses,branch-loads,dTLB-load-misses,dTLB-loads,iTLB-load-misses,iTLB-loads ./beforesort</span>
</span></span><span class="line"><span class="cl"><span class="mf">16.8872</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">182</span><span class="p">,</span><span class="mi">485</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>                                                 <span class="p">(</span><span class="mf">29.93</span><span class="o">%</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">46</span><span class="p">,</span><span class="mi">401</span><span class="p">,</span><span class="mi">675</span><span class="p">,</span><span class="mi">872</span>      <span class="n">bus</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1"># 2747.200 M/sec                    (29.95%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">206</span><span class="p">,</span><span class="mi">116</span><span class="p">,</span><span class="mi">950</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#    0.546 % of all cache refs      (29.97%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">37</span><span class="p">,</span><span class="mi">773</span><span class="p">,</span><span class="mi">036</span><span class="p">,</span><span class="mi">315</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1"># 2236.343 M/sec                    (30.01%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">46</span><span class="p">,</span><span class="mi">410</span><span class="p">,</span><span class="mi">071</span><span class="p">,</span><span class="mi">081</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.748 GHz                      (35.03%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">77</span><span class="p">,</span><span class="mi">083</span><span class="p">,</span><span class="mi">625</span><span class="p">,</span><span class="mi">280</span>      <span class="n">instructions</span>              <span class="c1">#    1.66  insn per cycle</span>
</span></span><span class="line"><span class="cl">                                                  <span class="c1">#    0.06  stalled cycles per insn  (35.07%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">961</span><span class="p">,</span><span class="mi">071</span><span class="p">,</span><span class="mi">890</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">backend</span>    <span class="c1">#    4.23% backend cycles idle      (35.11%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">4</span><span class="p">,</span><span class="mi">988</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">014</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">frontend</span>   <span class="c1">#   10.75% frontend cycles idle     (35.11%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">bpf</span><span class="o">-</span><span class="n">output</span>                <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">             <span class="mi">1</span><span class="p">,</span><span class="mi">100</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.065 K/sec</span>
</span></span><span class="line"><span class="cl">         <span class="mi">16</span><span class="p">,</span><span class="mf">890.39</span> <span class="n">msec</span> <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span>                 <span class="c1">#    0.997 CPUs utilized</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">7</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">229</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.014 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">229</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.014 K/sec</span>
</span></span><span class="line"><span class="cl">         <span class="mi">16</span><span class="p">,</span><span class="mf">890.69</span> <span class="n">msec</span> <span class="n">task</span><span class="o">-</span><span class="n">clock</span>                <span class="c1">#    0.997 CPUs utilized</span>
</span></span><span class="line"><span class="cl">       <span class="mi">205</span><span class="p">,</span><span class="mi">761</span><span class="p">,</span><span class="mi">970</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.54% of all L1-dcache accesses  (35.09%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">37</span><span class="p">,</span><span class="mi">832</span><span class="p">,</span><span class="mi">336</span><span class="p">,</span><span class="mi">945</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 2239.854 M/sec                    (35.06%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">207</span><span class="p">,</span><span class="mi">158</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.00% of all L1-icache accesses  (35.04%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">41</span><span class="p">,</span><span class="mi">944</span><span class="p">,</span><span class="mi">228</span><span class="p">,</span><span class="mi">741</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 2483.298 M/sec                    (30.00%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">135</span><span class="p">,</span><span class="mi">144</span>      <span class="n">LLC</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>           <span class="c1">#    0.00% of all LL-cache accesses  (29.97%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">loads</span>                 <span class="c1">#    0.000 K/sec                    (29.97%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">232</span><span class="p">,</span><span class="mi">325</span><span class="p">,</span><span class="mi">180</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#   72.960 M/sec                    (29.96%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">14</span><span class="p">,</span><span class="mi">776</span><span class="p">,</span><span class="mi">289</span><span class="p">,</span><span class="mi">690</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1">#  874.827 M/sec                    (29.96%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">177</span><span class="p">,</span><span class="mi">790</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.00% of all dTLB cache accesses  (29.97%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">37</span><span class="p">,</span><span class="mi">839</span><span class="p">,</span><span class="mi">288</span><span class="p">,</span><span class="mi">998</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1"># 2240.266 M/sec                    (29.95%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">46</span><span class="p">,</span><span class="mi">301</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.00% of all iTLB cache accesses  (29.94%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">12</span><span class="p">,</span><span class="mi">631</span><span class="p">,</span><span class="mi">307</span><span class="p">,</span><span class="mi">441</span>      <span class="n">iTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#  747.833 M/sec                    (29.92%)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="mf">16.943678377</span> <span class="n">seconds</span> <span class="n">time</span> <span class="n">elapsed</span></span></span></code></pre>
</div>
<p>M710上排序与否和鲲鹏差不多，但是 M710比 鲲鹏要快一些，差别只要有主频高一点点(6%)，另外M710编译后的指令数量也略少(8%)。</p>
<p>最大的差别是没有排序的话 branch-load-misses(1,232,325,180)/branch-loads(14,776,289,690) 比例只有鲲鹏的50%，导致整体 IPC 比鲲鹏高不少(1.66 VS 1.04)</p>
<p>如果是排序后的数据来看 M710比鲲鹏好40%，IPC 好了20%，iTLB-loads 差异特别大</p>
<h3 id="aarch64-ft-s2500" class="headerLink">
    <a href="#aarch64-ft-s2500" class="header-mark"></a>aarch64 FT S2500</h3><div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-9" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-misses,bus-cycles,cache-misses,cache-references,cpu-cycles,instructions,alignment-faults,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-dcache-store-misses,L1-dcache-stores,L1-icache-load-misses,L1-icache-loads,branch-load-misses,branch-loads,dTLB-load-misses,iTLB-load-misses ./aftersort</span>
</span></span><span class="line"><span class="cl"><span class="mf">16.63</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">         <span class="mi">1</span><span class="p">,</span><span class="mi">298</span><span class="p">,</span><span class="mi">873</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>             <span class="c1">#    0.078 M/sec                    (37.49%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">34</span><span class="p">,</span><span class="mi">893</span><span class="p">,</span><span class="mi">306</span><span class="p">,</span><span class="mi">641</span>      <span class="n">bus</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1"># 2096.049 M/sec                    (37.51%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">211</span><span class="p">,</span><span class="mi">447</span><span class="p">,</span><span class="mi">452</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#    0.913 % of all cache refs      (37.53%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">23</span><span class="p">,</span><span class="mi">154</span><span class="p">,</span><span class="mi">909</span><span class="p">,</span><span class="mi">673</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1"># 1390.921 M/sec                    (37.54%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">34</span><span class="p">,</span><span class="mi">891</span><span class="p">,</span><span class="mi">766</span><span class="p">,</span><span class="mi">353</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.096 GHz                      (43.79%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">83</span><span class="p">,</span><span class="mi">918</span><span class="p">,</span><span class="mi">069</span><span class="p">,</span><span class="mi">835</span>      <span class="n">instructions</span>              <span class="c1">#    2.41  insns per cycle          (43.79%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">102</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.006 K/sec</span>
</span></span><span class="line"><span class="cl">      <span class="mf">16647.131540</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="mi">35</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.002 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">384</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.023 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">384</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.023 K/sec</span>
</span></span><span class="line"><span class="cl">      <span class="mf">16647.178560</span>      <span class="n">task</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>         <span class="c1">#    1.000 CPUs utilized</span>
</span></span><span class="line"><span class="cl">       <span class="mi">211</span><span class="p">,</span><span class="mi">277</span><span class="p">,</span><span class="mi">069</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.91% of all L1-dcache hits    (43.79%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">23</span><span class="p">,</span><span class="mi">168</span><span class="p">,</span><span class="mi">806</span><span class="p">,</span><span class="mi">437</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 1391.756 M/sec                    (43.77%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">211</span><span class="p">,</span><span class="mi">376</span><span class="p">,</span><span class="mi">611</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>    <span class="c1">#   12.697 M/sec                    (43.75%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">23</span><span class="p">,</span><span class="mi">172</span><span class="p">,</span><span class="mi">492</span><span class="p">,</span><span class="mi">978</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">stores</span>          <span class="c1"># 1391.977 M/sec                    (43.73%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">6</span><span class="p">,</span><span class="mi">060</span><span class="p">,</span><span class="mi">438</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.364 M/sec                    (43.72%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">23</span><span class="p">,</span><span class="mi">283</span><span class="p">,</span><span class="mi">174</span><span class="p">,</span><span class="mi">318</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 1398.626 M/sec                    (37.48%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">1</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">268</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#    0.072 M/sec                    (37.47%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">6</span><span class="p">,</span><span class="mi">626</span><span class="p">,</span><span class="mi">003</span><span class="p">,</span><span class="mi">512</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1">#  398.026 M/sec                    (37.47%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">4</span><span class="p">,</span><span class="mi">417</span><span class="p">,</span><span class="mi">981</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.265 M/sec                    (37.47%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">58</span><span class="p">,</span><span class="mi">242</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.003 M/sec                    (37.47%)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-misses,bus-cycles,cache-misses,cache-references,cpu-cycles,instructions,alignment-faults,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-dcache-store-misses,L1-dcache-stores,L1-icache-load-misses,L1-icache-loads,branch-load-misses,branch-loads,dTLB-load-misses,iTLB-load-misses ./beforesort</span>
</span></span><span class="line"><span class="cl"><span class="mf">39.8</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">641</span><span class="p">,</span><span class="mi">714</span><span class="p">,</span><span class="mi">982</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>             <span class="c1">#   41.244 M/sec                    (37.50%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">83</span><span class="p">,</span><span class="mi">450</span><span class="p">,</span><span class="mi">971</span><span class="p">,</span><span class="mi">727</span>      <span class="n">bus</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1"># 2096.514 M/sec                    (37.51%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">209</span><span class="p">,</span><span class="mi">942</span><span class="p">,</span><span class="mi">920</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#    0.625 % of all cache refs      (37.51%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">33</span><span class="p">,</span><span class="mi">584</span><span class="p">,</span><span class="mi">108</span><span class="p">,</span><span class="mi">027</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1">#  843.724 M/sec                    (37.51%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">83</span><span class="p">,</span><span class="mi">446</span><span class="p">,</span><span class="mi">991</span><span class="p">,</span><span class="mi">284</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.096 GHz                      (43.76%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">83</span><span class="p">,</span><span class="mi">872</span><span class="p">,</span><span class="mi">213</span><span class="p">,</span><span class="mi">462</span>      <span class="n">instructions</span>              <span class="c1">#    1.01  insns per cycle          (43.75%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">165</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.004 K/sec</span>
</span></span><span class="line"><span class="cl">      <span class="mf">39804.395840</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">104</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.003 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">728</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.018 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">728</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.018 K/sec</span>
</span></span><span class="line"><span class="cl">      <span class="mf">39804.626860</span>      <span class="n">task</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>         <span class="c1">#    1.000 CPUs utilized</span>
</span></span><span class="line"><span class="cl">       <span class="mi">209</span><span class="p">,</span><span class="mi">884</span><span class="p">,</span><span class="mi">485</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.62% of all L1-dcache hits    (43.75%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">33</span><span class="p">,</span><span class="mi">591</span><span class="p">,</span><span class="mi">847</span><span class="p">,</span><span class="mi">895</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1">#  843.918 M/sec                    (43.75%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">209</span><span class="p">,</span><span class="mi">796</span><span class="p">,</span><span class="mi">158</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>    <span class="c1">#    5.271 M/sec                    (43.75%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">33</span><span class="p">,</span><span class="mi">595</span><span class="p">,</span><span class="mi">628</span><span class="p">,</span><span class="mi">139</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">stores</span>          <span class="c1">#  844.013 M/sec                    (43.75%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">5</span><span class="p">,</span><span class="mi">575</span><span class="p">,</span><span class="mi">802</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.140 M/sec                    (43.75%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">68</span><span class="p">,</span><span class="mi">272</span><span class="p">,</span><span class="mi">798</span><span class="p">,</span><span class="mi">305</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 1715.198 M/sec                    (37.50%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">642</span><span class="p">,</span><span class="mi">653</span><span class="p">,</span><span class="mi">627</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#   41.268 M/sec                    (37.50%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">6</span><span class="p">,</span><span class="mi">846</span><span class="p">,</span><span class="mi">418</span><span class="p">,</span><span class="mi">902</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1">#  172.001 M/sec                    (37.50%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">4</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">728</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.105 M/sec                    (37.50%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">57</span><span class="p">,</span><span class="mi">375</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.001 M/sec                    (37.50%)</span></span></span></code></pre>
</div>
<h3 id="intel-x86-8163" class="headerLink">
    <a href="#intel-x86-8163" class="header-mark"></a>Intel x86 8163</h3><div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-10" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-instructions,branch-misses,bus-cycles,cache-misses,cache-references,cpu-cycles,instructions,ref-cycles,alignment-faults,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-dcache-stores,L1-icache-load-misses,LLC-load-misses,LLC-loads,LLC-store-misses,LLC-stores,branch-load-misses,branch-loads,dTLB-load-misses,dTLB-loads,dTLB-store-misses,dTLB-stores,iTLB-load-misses,iTLB-loads,node-load-misses,node-loads,node-store-misses,node-stores ./aftersort</span>
</span></span><span class="line"><span class="cl"><span class="mf">9.77</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="mi">6</span><span class="p">,</span><span class="mi">541</span><span class="p">,</span><span class="mi">060</span><span class="p">,</span><span class="mi">672</span>      <span class="n">branch</span><span class="o">-</span><span class="n">instructions</span>       <span class="c1">#  669.204 M/sec                    (10.72%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">727</span><span class="p">,</span><span class="mi">847</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>             <span class="c1">#    0.01% of all branches          (14.30%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">241</span><span class="p">,</span><span class="mi">730</span><span class="p">,</span><span class="mi">862</span>      <span class="n">bus</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#   24.731 M/sec                    (17.88%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">275</span><span class="p">,</span><span class="mi">443</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#   44.685 % of all cache refs      (21.45%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">616</span><span class="p">,</span><span class="mi">413</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1">#    0.063 M/sec                    (25.03%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">24</span><span class="p">,</span><span class="mi">186</span><span class="p">,</span><span class="mi">369</span><span class="p">,</span><span class="mi">646</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.474 GHz                      (28.60%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">29</span><span class="p">,</span><span class="mi">491</span><span class="p">,</span><span class="mi">804</span><span class="p">,</span><span class="mi">977</span>      <span class="n">instructions</span>              <span class="c1">#    1.22  insns per cycle          (32.18%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">24</span><span class="p">,</span><span class="mi">198</span><span class="p">,</span><span class="mi">780</span><span class="p">,</span><span class="mi">299</span>      <span class="n">ref</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1"># 2475.731 M/sec                    (35.75%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                <span class="mi">16</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.002 K/sec</span>
</span></span><span class="line"><span class="cl">       <span class="mf">9774.393202</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">8</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.001 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">490</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.050 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">490</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.050 K/sec</span>
</span></span><span class="line"><span class="cl">       <span class="mf">9774.396556</span>      <span class="n">task</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>         <span class="c1">#    1.001 CPUs utilized</span>
</span></span><span class="line"><span class="cl">        <span class="mi">74</span><span class="p">,</span><span class="mi">078</span><span class="p">,</span><span class="mi">676</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    1.64% of all L1-dcache hits    (189256748561.94%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">4</span><span class="p">,</span><span class="mi">515</span><span class="p">,</span><span class="mi">522</span><span class="p">,</span><span class="mi">850</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1">#  461.975 M/sec                    (189237344482.16%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">3</span><span class="p">,</span><span class="mi">798</span><span class="p">,</span><span class="mi">032</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">stores</span>          <span class="c1">#    0.389 M/sec                    (189217941721.85%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">1</span><span class="p">,</span><span class="mi">077</span><span class="p">,</span><span class="mi">146</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.110 M/sec                    (189198537875.18%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">89</span><span class="p">,</span><span class="mi">144</span>      <span class="n">LLC</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>           <span class="c1">#   74.54% of all LL-cache hits     (189179139811.86%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">119</span><span class="p">,</span><span class="mi">586</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">loads</span>                 <span class="c1">#    0.012 M/sec                    (189159737036.24%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">3</span><span class="p">,</span><span class="mi">450</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.353 K/sec                    (189140342885.02%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">105</span><span class="p">,</span><span class="mi">021</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">stores</span>                <span class="c1">#    0.011 M/sec                    (7.15%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">458</span><span class="p">,</span><span class="mi">465</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#    0.047 M/sec                    (10.73%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">6</span><span class="p">,</span><span class="mi">557</span><span class="p">,</span><span class="mi">558</span><span class="p">,</span><span class="mi">579</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1">#  670.891 M/sec                    (14.30%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">733</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.00% of all dTLB cache hits   (17.87%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">12</span><span class="p">,</span><span class="mi">039</span><span class="p">,</span><span class="mi">967</span><span class="p">,</span><span class="mi">837</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1"># 1231.786 M/sec                    (21.44%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">104</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>         <span class="c1">#    0.011 K/sec                    (25.01%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">7</span><span class="p">,</span><span class="mi">040</span><span class="p">,</span><span class="mi">783</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">stores</span>               <span class="c1">#    0.720 M/sec                    (28.58%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">763</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#   62.80% of all iTLB cache hits   (28.56%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">1</span><span class="p">,</span><span class="mi">215</span>      <span class="n">iTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    0.124 K/sec                    (28.55%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">168</span><span class="p">,</span><span class="mi">588</span>      <span class="n">node</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.017 M/sec                    (28.55%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">131</span><span class="p">,</span><span class="mi">578</span>      <span class="n">node</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    0.013 M/sec                    (28.55%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">4</span><span class="p">,</span><span class="mi">484</span>      <span class="n">node</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>         <span class="c1">#    0.459 K/sec                    (7.14%)</span>
</span></span><span class="line"><span class="cl">                <span class="mi">42</span>      <span class="n">node</span><span class="o">-</span><span class="n">stores</span>               <span class="c1">#    0.004 K/sec                    (7.14%)</span>
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-instructions,branch-misses,bus-cycles,cache-misses,cache-references,cpu-cycles,instructions,ref-cycles,alignment-faults,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-dcache-stores,L1-icache-load-misses,LLC-load-misses,LLC-loads,LLC-store-misses,LLC-stores,branch-load-misses,branch-loads,dTLB-load-misses,dTLB-loads,dTLB-store-misses,dTLB-stores,iTLB-load-misses,iTLB-loads,node-load-misses,node-loads,node-store-misses,node-stores ./beforesort</span>
</span></span><span class="line"><span class="cl"><span class="mf">29.52</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="mi">6</span><span class="p">,</span><span class="mi">565</span><span class="p">,</span><span class="mi">036</span><span class="p">,</span><span class="mi">614</span>      <span class="n">branch</span><span class="o">-</span><span class="n">instructions</span>       <span class="c1">#  222.370 M/sec                    (10.72%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">599</span><span class="p">,</span><span class="mi">826</span><span class="p">,</span><span class="mi">737</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>             <span class="c1">#   24.37% of all branches          (14.29%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">730</span><span class="p">,</span><span class="mi">977</span><span class="p">,</span><span class="mi">010</span>      <span class="n">bus</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#   24.760 M/sec                    (17.86%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">920</span><span class="p">,</span><span class="mi">858</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#   48.057 % of all cache refs      (21.43%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">1</span><span class="p">,</span><span class="mi">916</span><span class="p">,</span><span class="mi">178</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1">#    0.065 M/sec                    (25.00%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">73</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">904</span><span class="p">,</span><span class="mi">158</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.477 GHz                      (28.57%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">29</span><span class="p">,</span><span class="mi">618</span><span class="p">,</span><span class="mi">485</span><span class="p">,</span><span class="mi">912</span>      <span class="n">instructions</span>              <span class="c1">#    0.41  insns per cycle          (32.14%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">73</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">861</span><span class="p">,</span><span class="mi">566</span>      <span class="n">ref</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1"># 2477.828 M/sec                    (35.72%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                <span class="mi">26</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.001 K/sec</span>
</span></span><span class="line"><span class="cl">      <span class="mf">29522.972689</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="mi">13</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">593</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.020 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">593</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.020 K/sec</span>
</span></span><span class="line"><span class="cl">      <span class="mf">29522.976661</span>      <span class="n">task</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>         <span class="c1">#    1.001 CPUs utilized</span>
</span></span><span class="line"><span class="cl">        <span class="mi">76</span><span class="p">,</span><span class="mi">164</span><span class="p">,</span><span class="mi">025</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    1.68% of all L1-dcache hits    (62596004730.92%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">4</span><span class="p">,</span><span class="mi">521</span><span class="p">,</span><span class="mi">935</span><span class="p">,</span><span class="mi">099</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1">#  153.167 M/sec                    (62593882213.79%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">1</span><span class="p">,</span><span class="mi">170</span><span class="p">,</span><span class="mi">288</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">stores</span>          <span class="c1">#    0.040 M/sec                    (62591759384.11%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">2</span><span class="p">,</span><span class="mi">975</span><span class="p">,</span><span class="mi">318</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.101 M/sec                    (62591281765.29%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">178</span><span class="p">,</span><span class="mi">510</span>      <span class="n">LLC</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>           <span class="c1">#   66.98% of all LL-cache hits     (62591281765.30%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">266</span><span class="p">,</span><span class="mi">514</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">loads</span>                 <span class="c1">#    0.009 M/sec                    (62591281765.18%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">6</span><span class="p">,</span><span class="mi">841</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.232 K/sec                    (62591578887.87%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">335</span><span class="p">,</span><span class="mi">369</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">stores</span>                <span class="c1">#    0.011 M/sec                    (7.15%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">600</span><span class="p">,</span><span class="mi">893</span><span class="p">,</span><span class="mi">693</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#   54.225 M/sec                    (10.72%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">6</span><span class="p">,</span><span class="mi">565</span><span class="p">,</span><span class="mi">516</span><span class="p">,</span><span class="mi">562</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1">#  222.387 M/sec                    (14.29%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">33</span><span class="p">,</span><span class="mi">070</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.00% of all dTLB cache hits   (17.87%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">12</span><span class="p">,</span><span class="mi">043</span><span class="p">,</span><span class="mi">088</span><span class="p">,</span><span class="mi">689</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#  407.923 M/sec                    (21.44%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">180</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>         <span class="c1">#    0.006 K/sec                    (25.01%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">2</span><span class="p">,</span><span class="mi">359</span><span class="p">,</span><span class="mi">365</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">stores</span>               <span class="c1">#    0.080 M/sec                    (28.58%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">9</span><span class="p">,</span><span class="mi">399</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#  849.82% of all iTLB cache hits   (28.58%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">1</span><span class="p">,</span><span class="mi">106</span>      <span class="n">iTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    0.037 K/sec                    (28.58%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">439</span><span class="p">,</span><span class="mi">052</span>      <span class="n">node</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.015 M/sec                    (28.58%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">367</span><span class="p">,</span><span class="mi">546</span>      <span class="n">node</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    0.012 M/sec                    (28.58%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">7</span><span class="p">,</span><span class="mi">539</span>      <span class="n">node</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>         <span class="c1">#    0.255 K/sec                    (7.15%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">1</span><span class="p">,</span><span class="mi">736</span>      <span class="n">node</span><span class="o">-</span><span class="n">stores</span>               <span class="c1">#    0.059 K/sec                    (7.14%)            </span></span></span></code></pre>
</div>
<p>从 x86 和 aarch 对比来看，x86 编译后的指令数是 aarch 的35%，ARM 是精简指令，数量多比较好理解。主频2.5 GHz 较 M710低了11%。</p>
<p>IPC 差异比较大，有一部分是因为 ARM 精简指令本来有较高的 IPC。</p>
<p>从排序前的差异来看除了指令集外导致 IPC 较高的原因主要也是 branch-load-misses(1,232,325,180)/branch-loads(14,776,289,690)  比 intel的 1,602,020,038/6,568,921,480, 也就是 M710的 branch miss 率比 intel 低了一倍。</p>
<p>排序后去掉了 branch miss 差异，M710 比 intel 快了 10%，只要是因为主频的差异</p>
<p>on 8269 3.2GHz</p>
<div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-11" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-instructions,branch-misses,cpu-cycles,instructions,branch-load-misses,branch-loads,task-clock,cpu-clock ./beforesort</span>
</span></span><span class="line"><span class="cl"><span class="mf">22.96</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="ne">Performance</span> <span class="n">counter</span> <span class="n">stats</span> <span class="k">for</span> <span class="s1">&#39;./beforesort&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="mi">6</span><span class="p">,</span><span class="mi">573</span><span class="p">,</span><span class="mi">626</span><span class="p">,</span><span class="mi">859</span>      <span class="n">branch</span><span class="o">-</span><span class="n">instructions</span>       <span class="c1">#  286.177 M/sec                    (83.33%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">602</span><span class="p">,</span><span class="mi">898</span><span class="p">,</span><span class="mi">541</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>             <span class="c1">#   24.38% of all branches          (83.33%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">73</span><span class="p">,</span><span class="mi">189</span><span class="p">,</span><span class="mi">204</span><span class="p">,</span><span class="mi">878</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    3.186 GHz                      (66.67%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">29</span><span class="p">,</span><span class="mi">627</span><span class="p">,</span><span class="mi">520</span><span class="p">,</span><span class="mi">323</span>      <span class="n">instructions</span>              <span class="c1">#    0.40  insns per cycle          (83.33%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">602</span><span class="p">,</span><span class="mi">848</span><span class="p">,</span><span class="mi">454</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#   69.779 M/sec                    (83.33%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">6</span><span class="p">,</span><span class="mi">572</span><span class="p">,</span><span class="mi">915</span><span class="p">,</span><span class="mi">651</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1">#  286.146 M/sec                    (83.33%)</span>
</span></span><span class="line"><span class="cl">      <span class="mf">22970.482491</span>      <span class="n">task</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>         <span class="c1">#    1.001 CPUs utilized</span>
</span></span><span class="line"><span class="cl">      <span class="mf">22970.482557</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span></span></span></code></pre>
</div>
<h3 id="hygon-7260-1" class="headerLink">
    <a href="#hygon-7260-1" class="header-mark"></a>hygon 7260</h3><div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-12" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-instructions,branch-misses,cache-misses,cache-references,cpu-cycles,instructions,stalled-cycles-backend,stalled-cycles-frontend,alignment-faults,bpf-output,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-dcache-prefetches,L1-icache-load-misses,L1-icache-loads,branch-load-misses,branch-loads,dTLB-load-misses,dTLB-loads,iTLB-load-misses,iTLB-loads ./aftersort</span>
</span></span><span class="line"><span class="cl"><span class="mf">10.9479</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">     <span class="mi">9</span><span class="p">,</span><span class="mi">848</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">830</span>      <span class="n">branch</span><span class="o">-</span><span class="n">instructions</span>       <span class="c1">#  898.161 M/sec                    (26.26%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">496</span><span class="p">,</span><span class="mi">734</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>             <span class="c1">#    0.01% of all branches          (26.30%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">713</span><span class="p">,</span><span class="mi">235</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#    0.336 % of all cache refs      (26.34%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">212</span><span class="p">,</span><span class="mi">455</span><span class="p">,</span><span class="mi">257</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1">#   19.376 M/sec                    (26.37%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">27</span><span class="p">,</span><span class="mi">277</span><span class="p">,</span><span class="mi">461</span><span class="p">,</span><span class="mi">559</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.488 GHz                      (26.41%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">32</span><span class="p">,</span><span class="mi">785</span><span class="p">,</span><span class="mi">270</span><span class="p">,</span><span class="mi">866</span>      <span class="n">instructions</span>              <span class="c1">#    1.20  insn per cycle</span>
</span></span><span class="line"><span class="cl">                                                  <span class="c1">#    0.58  stalled cycles per insn  (26.43%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">19</span><span class="p">,</span><span class="mi">069</span><span class="p">,</span><span class="mi">766</span><span class="p">,</span><span class="mi">918</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">backend</span>    <span class="c1">#   69.91% backend cycles idle      (26.43%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">6</span><span class="p">,</span><span class="mi">560</span><span class="p">,</span><span class="mi">109</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">frontend</span>   <span class="c1">#    0.02% frontend cycles idle     (26.42%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">bpf</span><span class="o">-</span><span class="n">output</span>                <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">             <span class="mi">1</span><span class="p">,</span><span class="mi">086</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.099 K/sec</span>
</span></span><span class="line"><span class="cl">         <span class="mi">10</span><span class="p">,</span><span class="mf">964.61</span> <span class="n">msec</span> <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span>                 <span class="c1">#    0.999 CPUs utilized</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">154</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.014 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">154</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.014 K/sec</span>
</span></span><span class="line"><span class="cl">         <span class="mi">10</span><span class="p">,</span><span class="mf">964.91</span> <span class="n">msec</span> <span class="n">task</span><span class="o">-</span><span class="n">clock</span>                <span class="c1">#    0.999 CPUs utilized</span>
</span></span><span class="line"><span class="cl">       <span class="mi">206</span><span class="p">,</span><span class="mi">294</span><span class="p">,</span><span class="mi">123</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    1.14% of all L1-dcache hits    (26.38%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">18</span><span class="p">,</span><span class="mi">083</span><span class="p">,</span><span class="mi">269</span><span class="p">,</span><span class="mi">173</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 1649.217 M/sec                    (26.35%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">205</span><span class="p">,</span><span class="mi">499</span><span class="p">,</span><span class="mi">292</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">prefetches</span>      <span class="c1">#   18.742 M/sec                    (26.31%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">749</span><span class="p">,</span><span class="mi">548</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    8.67% of all L1-icache hits    (26.27%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">8</span><span class="p">,</span><span class="mi">643</span><span class="p">,</span><span class="mi">478</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1">#    0.788 M/sec                    (26.25%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">305</span><span class="p">,</span><span class="mi">577</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#    0.028 M/sec                    (26.25%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">9</span><span class="p">,</span><span class="mi">850</span><span class="p">,</span><span class="mi">674</span><span class="p">,</span><span class="mi">490</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1">#  898.394 M/sec                    (26.25%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">6</span><span class="p">,</span><span class="mi">736</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    6.85% of all dTLB cache hits   (26.25%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">98</span><span class="p">,</span><span class="mi">327</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    0.009 M/sec                    (26.25%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">114</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#   78.62% of all iTLB cache hits   (26.25%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">145</span>      <span class="n">iTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    0.013 K/sec                    (26.25%)</span>
</span></span><span class="line"><span class="cl">               
</span></span><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-instructions,branch-misses,cache-misses,cache-references,cpu-cycles,instructions,stalled-cycles-backend,stalled-cycles-frontend,alignment-faults,bpf-output,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-dcache-prefetches,L1-icache-load-misses,L1-icache-loads,branch-load-misses,branch-loads,dTLB-load-misses,dTLB-loads,iTLB-load-misses,iTLB-loads ./beforesort</span>
</span></span><span class="line"><span class="cl"><span class="mf">23.3648</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="mi">9</span><span class="p">,</span><span class="mi">843</span><span class="p">,</span><span class="mi">358</span><span class="p">,</span><span class="mi">378</span>      <span class="n">branch</span><span class="o">-</span><span class="n">instructions</span>       <span class="c1">#  421.186 M/sec                    (26.26%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">804</span><span class="p">,</span><span class="mi">801</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>             <span class="c1">#   11.75% of all branches          (26.28%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">754</span><span class="p">,</span><span class="mi">542</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#    0.351 % of all cache refs      (26.29%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">215</span><span class="p">,</span><span class="mi">234</span><span class="p">,</span><span class="mi">724</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1">#    9.210 M/sec                    (26.31%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">58</span><span class="p">,</span><span class="mi">274</span><span class="p">,</span><span class="mi">116</span><span class="p">,</span><span class="mi">562</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.493 GHz                      (26.33%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">32</span><span class="p">,</span><span class="mi">850</span><span class="p">,</span><span class="mi">416</span><span class="p">,</span><span class="mi">330</span>      <span class="n">instructions</span>              <span class="c1">#    0.56  insn per cycle</span>
</span></span><span class="line"><span class="cl">                                                  <span class="c1">#    0.06  stalled cycles per insn  (26.34%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">838</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">200</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">backend</span>    <span class="c1">#    3.15% backend cycles idle      (26.34%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">187</span><span class="p">,</span><span class="mi">291</span><span class="p">,</span><span class="mi">146</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">frontend</span>   <span class="c1">#    2.04% frontend cycles idle     (26.34%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">bpf</span><span class="o">-</span><span class="n">output</span>                <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">             <span class="mi">2</span><span class="p">,</span><span class="mi">326</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.100 K/sec</span>
</span></span><span class="line"><span class="cl">         <span class="mi">23</span><span class="p">,</span><span class="mf">370.23</span> <span class="n">msec</span> <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span>                 <span class="c1">#    0.999 CPUs utilized</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">150</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.006 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">150</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.006 K/sec</span>
</span></span><span class="line"><span class="cl">         <span class="mi">23</span><span class="p">,</span><span class="mf">370.97</span> <span class="n">msec</span> <span class="n">task</span><span class="o">-</span><span class="n">clock</span>                <span class="c1">#    0.999 CPUs utilized</span>
</span></span><span class="line"><span class="cl">       <span class="mi">207</span><span class="p">,</span><span class="mi">451</span><span class="p">,</span><span class="mi">839</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.82% of all L1-dcache hits    (26.34%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">25</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="mi">673</span><span class="p">,</span><span class="mi">249</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1"># 1077.451 M/sec                    (26.34%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">205</span><span class="p">,</span><span class="mi">669</span><span class="p">,</span><span class="mi">557</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">prefetches</span>      <span class="c1">#    8.800 M/sec                    (26.34%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">1</span><span class="p">,</span><span class="mi">725</span><span class="p">,</span><span class="mi">971</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    8.12% of all L1-icache hits    (26.34%)</span>
</span></span><span class="line"><span class="cl">        <span class="mi">21</span><span class="p">,</span><span class="mi">265</span><span class="p">,</span><span class="mi">604</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1">#    0.910 M/sec                    (26.34%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">157</span><span class="p">,</span><span class="mi">454</span><span class="p">,</span><span class="mi">249</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#   49.526 M/sec                    (26.34%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">9</span><span class="p">,</span><span class="mi">843</span><span class="p">,</span><span class="mi">015</span><span class="p">,</span><span class="mi">406</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1">#  421.171 M/sec                    (26.33%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">22</span><span class="p">,</span><span class="mi">287</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    7.08% of all dTLB cache hits   (26.31%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">314</span><span class="p">,</span><span class="mi">618</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    0.013 M/sec                    (26.29%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">445</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#   44.95% of all iTLB cache hits   (26.28%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">990</span>      <span class="n">iTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    0.042 K/sec                    (26.26%)</span></span></span></code></pre>
</div>
<p>hygon 在这两个场景中排序前比 intel 好了 20%，IPC 好30%，但是指令数多了10%，最关键的也是因为hygon的 branch-load-misses 率较低。</p>
<p>排序后 hygon 略慢10%，主要是指令数多了将近10%。</p>
<p>如果直接将 intel 下 编译好的二进制放到 hygon 下运行，完全可以跑通，指令数也显示和 intel 一样了，但是总时间较在hygon下编译的二进制没有变化</p>
<p><img class="tw-inline" loading="lazy" src=https://cdn.jsdelivr.net/gh/plantegg/plantegg.github.io/images/951413iMgBlog/image-20230308145915585.png   alt="image-20230308145915585"  ></p>
<h2 id="开启-gcc-o3-优化" class="headerLink">
    <a href="#%e5%bc%80%e5%90%af-gcc-o3-%e4%bc%98%e5%8c%96" class="header-mark"></a>开启 gcc O3 优化</h2><h3 id="intel-8163" class="headerLink">
    <a href="#intel-8163" class="header-mark"></a>intel 8163</h3><div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-13" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-instructions,branch-misses,bus-cycles,cache-misses,cache-references,cpu-cycles,instructions,ref-cycles,alignment-faults,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-dcache-stores,L1-icache-load-misses,LLC-load-misses,LLC-loads,LLC-store-misses,LLC-stores,branch-load-misses,branch-loads,dTLB-load-misses,dTLB-loads,dTLB-store-misses,dTLB-stores,iTLB-load-misses,iTLB-loads,node-load-misses,node-loads,node-store-misses,node-stores ./beforesort</span>
</span></span><span class="line"><span class="cl"><span class="mf">2.94</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="mi">3</span><span class="p">,</span><span class="mi">268</span><span class="p">,</span><span class="mi">501</span><span class="p">,</span><span class="mi">946</span>      <span class="n">branch</span><span class="o">-</span><span class="n">instructions</span>       <span class="c1"># 1109.263 M/sec                    (10.74%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">226</span><span class="p">,</span><span class="mi">833</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>             <span class="c1">#    0.01% of all branches          (14.33%)</span>
</span></span><span class="line"><span class="cl">        <span class="mi">72</span><span class="p">,</span><span class="mi">998</span><span class="p">,</span><span class="mi">727</span>      <span class="n">bus</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#   24.774 M/sec                    (17.90%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">89</span><span class="p">,</span><span class="mi">636</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#   34.026 % of all cache refs      (21.47%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">263</span><span class="p">,</span><span class="mi">434</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1">#    0.089 M/sec                    (25.03%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">7</span><span class="p">,</span><span class="mi">301</span><span class="p">,</span><span class="mi">839</span><span class="p">,</span><span class="mi">495</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.478 GHz                      (28.59%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">26</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="mi">809</span><span class="p">,</span><span class="mi">574</span>      <span class="n">instructions</span>              <span class="c1">#    3.59  insns per cycle          (32.16%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">7</span><span class="p">,</span><span class="mi">304</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">283</span>      <span class="n">ref</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1"># 2478.880 M/sec                    (35.73%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                <span class="mi">10</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.003 K/sec</span>
</span></span><span class="line"><span class="cl">       <span class="mf">2946.550492</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">7</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.002 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">370</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.126 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">370</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.126 K/sec</span>
</span></span><span class="line"><span class="cl">       <span class="mf">2946.552985</span>      <span class="n">task</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>         <span class="c1">#    1.001 CPUs utilized</span>
</span></span><span class="line"><span class="cl">        <span class="mi">73</span><span class="p">,</span><span class="mi">550</span><span class="p">,</span><span class="mi">829</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    8.97% of all L1-dcache hits    (627063379426.55%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">820</span><span class="p">,</span><span class="mi">264</span><span class="p">,</span><span class="mi">255</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1">#  278.381 M/sec                    (627063379426.55%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">6</span><span class="p">,</span><span class="mi">301</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">stores</span>          <span class="c1">#    0.002 M/sec                    (627063379426.52%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">344</span><span class="p">,</span><span class="mi">639</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.117 M/sec                    (627063379426.51%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">70</span><span class="p">,</span><span class="mi">181</span>      <span class="n">LLC</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>           <span class="c1">#   84.80% of all LL-cache hits     (630745019998.59%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">82</span><span class="p">,</span><span class="mi">757</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">loads</span>                 <span class="c1">#    0.028 M/sec                    (630529428492.86%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">592</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.201 K/sec                    (630313967916.99%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">33</span><span class="p">,</span><span class="mi">362</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">stores</span>                <span class="c1">#    0.011 M/sec                    (7.17%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">153</span><span class="p">,</span><span class="mi">522</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#    0.052 M/sec                    (10.75%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">3</span><span class="p">,</span><span class="mi">263</span><span class="p">,</span><span class="mi">884</span><span class="p">,</span><span class="mi">498</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1"># 1107.696 M/sec                    (14.33%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">274</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.00% of all dTLB cache hits   (17.90%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">2</span><span class="p">,</span><span class="mi">179</span><span class="p">,</span><span class="mi">821</span><span class="p">,</span><span class="mi">780</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#  739.787 M/sec                    (21.47%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">8</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>         <span class="c1">#    0.003 K/sec                    (25.04%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">12</span><span class="p">,</span><span class="mi">708</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">stores</span>               <span class="c1">#    0.004 M/sec                    (28.61%)</span>
</span></span><span class="line"><span class="cl">                <span class="mi">59</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#   52.68% of all iTLB cache hits   (28.60%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">112</span>      <span class="n">iTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    0.038 K/sec                    (28.59%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">5</span><span class="p">,</span><span class="mi">919</span>      <span class="n">node</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.002 M/sec                    (28.59%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">1</span><span class="p">,</span><span class="mi">648</span>      <span class="n">node</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    0.559 K/sec                    (28.58%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">560</span>      <span class="n">node</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>         <span class="c1">#    0.190 K/sec                    (7.15%)</span>
</span></span><span class="line"><span class="cl">                <span class="mi">14</span>      <span class="n">node</span><span class="o">-</span><span class="n">stores</span>               <span class="c1">#    0.005 K/sec                    (7.14%)</span>
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-instructions,branch-misses,bus-cycles,cache-misses,cache-references,cpu-cycles,instructions,ref-cycles,alignment-faults,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-dcache-stores,L1-icache-load-misses,LLC-load-misses,LLC-loads,LLC-store-misses,LLC-stores,branch-load-misses,branch-loads,dTLB-load-misses,dTLB-loads,dTLB-store-misses,dTLB-stores,iTLB-load-misses,iTLB-loads,node-load-misses,node-loads,node-store-misses,node-stores ./aftersort</span>
</span></span><span class="line"><span class="cl"><span class="mf">2.95</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="mi">3</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">184</span><span class="p">,</span><span class="mi">180</span>      <span class="n">branch</span><span class="o">-</span><span class="n">instructions</span>       <span class="c1"># 1102.320 M/sec                    (10.74%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">791</span><span class="p">,</span><span class="mi">180</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>             <span class="c1">#    0.02% of all branches          (14.35%)</span>
</span></span><span class="line"><span class="cl">        <span class="mi">73</span><span class="p">,</span><span class="mi">001</span><span class="p">,</span><span class="mi">075</span>      <span class="n">bus</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#   24.721 M/sec                    (17.93%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">520</span><span class="p">,</span><span class="mi">140</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#   82.262 % of all cache refs      (21.52%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">632</span><span class="p">,</span><span class="mi">298</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1">#    0.214 M/sec                    (25.11%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">7</span><span class="p">,</span><span class="mi">309</span><span class="p">,</span><span class="mi">286</span><span class="p">,</span><span class="mi">959</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.475 GHz                      (28.69%)</span>
</span></span><span class="line"><span class="cl">    <span class="mi">26</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">077</span><span class="p">,</span><span class="mi">275</span>      <span class="n">instructions</span>              <span class="c1">#    3.57  insns per cycle          (32.28%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">7</span><span class="p">,</span><span class="mi">316</span><span class="p">,</span><span class="mi">568</span><span class="p">,</span><span class="mi">954</span>      <span class="n">ref</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1"># 2477.649 M/sec                    (35.86%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                <span class="mi">10</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.003 K/sec</span>
</span></span><span class="line"><span class="cl">       <span class="mf">2953.027151</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">3</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.001 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">370</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.125 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">370</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.125 K/sec</span>
</span></span><span class="line"><span class="cl">       <span class="mf">2953.029425</span>      <span class="n">task</span><span class="o">-</span><span class="n">clock</span> <span class="p">(</span><span class="n">msec</span><span class="p">)</span>         <span class="c1">#    1.001 CPUs utilized</span>
</span></span><span class="line"><span class="cl">        <span class="mi">73</span><span class="p">,</span><span class="mi">778</span><span class="p">,</span><span class="mi">174</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    8.94% of all L1-dcache hits    (625801033059.49%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">825</span><span class="p">,</span><span class="mi">038</span><span class="p">,</span><span class="mi">324</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1">#  279.387 M/sec                    (625693600466.98%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">6</span><span class="p">,</span><span class="mi">137</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">stores</span>          <span class="c1">#    0.002 M/sec                    (625693600466.94%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">339</span><span class="p">,</span><span class="mi">275</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.115 M/sec                    (625693600466.87%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">7</span><span class="p">,</span><span class="mi">611</span>      <span class="n">LLC</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>           <span class="c1">#   52.34% of all LL-cache hits     (625693600466.22%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">14</span><span class="p">,</span><span class="mi">542</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">loads</span>                 <span class="c1">#    0.005 M/sec                    (625693600466.18%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">975</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.330 K/sec                    (625718826721.74%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">28</span><span class="p">,</span><span class="mi">542</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">stores</span>                <span class="c1">#    0.010 M/sec                    (7.17%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">150</span><span class="p">,</span><span class="mi">256</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#    0.051 M/sec                    (10.75%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">3</span><span class="p">,</span><span class="mi">260</span><span class="p">,</span><span class="mi">765</span><span class="p">,</span><span class="mi">171</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1"># 1104.210 M/sec                    (14.33%)</span>
</span></span><span class="line"><span class="cl">                <span class="mi">84</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.00% of all dTLB cache hits   (17.91%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">2</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">927</span><span class="p">,</span><span class="mi">665</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#  737.523 M/sec                    (21.48%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>         <span class="c1">#    0.000 K/sec                    (25.05%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">12</span><span class="p">,</span><span class="mi">502</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">stores</span>               <span class="c1">#    0.004 M/sec                    (28.62%)</span>
</span></span><span class="line"><span class="cl">                <span class="mi">10</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    5.62% of all iTLB cache hits   (28.61%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">178</span>      <span class="n">iTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    0.060 K/sec                    (28.60%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">14</span><span class="p">,</span><span class="mi">538</span>      <span class="n">node</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.005 M/sec                    (28.59%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">1</span><span class="p">,</span><span class="mi">527</span>      <span class="n">node</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    0.517 K/sec                    (28.62%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">2</span><span class="p">,</span><span class="mi">339</span>      <span class="n">node</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">misses</span>         <span class="c1">#    0.792 K/sec                    (7.18%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">node</span><span class="o">-</span><span class="n">stores</span>               <span class="c1">#    0.000 K/sec                    (7.14%)                </span></span></span></code></pre>
</div>
<p>可以看到 O3 优化后是否排序执行时间差不多，并且都比没有 O3 前的快几倍，指令数较优化前基本不变。</p>
<p>最明显的是排序前的 branch-load-misses 几乎都被优化掉了，这也导致 IPC 从0.41 提升到了3.59</p>
<h3 id="aarch64-m710-1" class="headerLink">
    <a href="#aarch64-m710-1" class="header-mark"></a>aarch64 M710</h3><div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">text</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-14" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-misses,bus-cycles,cache-misses,cache-references,cpu-cycles,instructions,stalled-cycles-backend,stalled-cycles-frontend,alignment-faults,bpf-output,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-icache-load-misses,L1-icache-loads,LLC-load-misses,LLC-loads,branch-load-misses,branch-loads,dTLB-load-misses,dTLB-loads,iTLB-load-misses,iTLB-loads  ./beforesort</span>
</span></span><span class="line"><span class="cl"><span class="mf">1.19468</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">           <span class="mi">178</span><span class="p">,</span><span class="mi">045</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>                                                 <span class="p">(</span><span class="mf">29.84</span><span class="o">%</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">3</span><span class="p">,</span><span class="mi">290</span><span class="p">,</span><span class="mi">281</span><span class="p">,</span><span class="mi">574</span>      <span class="n">bus</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1"># 2748.321 M/sec                    (29.84%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">204</span><span class="p">,</span><span class="mi">017</span><span class="p">,</span><span class="mi">139</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#   24.768 % of all cache refs      (29.84%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">823</span><span class="p">,</span><span class="mi">700</span><span class="p">,</span><span class="mi">482</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1">#  688.024 M/sec                    (29.84%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">3</span><span class="p">,</span><span class="mi">290</span><span class="p">,</span><span class="mi">247</span><span class="p">,</span><span class="mi">311</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.748 GHz                      (34.85%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">5</span><span class="p">,</span><span class="mi">730</span><span class="p">,</span><span class="mi">855</span><span class="p">,</span><span class="mi">778</span>      <span class="n">instructions</span>              <span class="c1">#    1.74  insn per cycle</span>
</span></span><span class="line"><span class="cl">                                                  <span class="c1">#    0.26  stalled cycles per insn  (34.85%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">485</span><span class="p">,</span><span class="mi">014</span><span class="p">,</span><span class="mi">712</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">backend</span>    <span class="c1">#   45.13% backend cycles idle      (35.03%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">980</span><span class="p">,</span><span class="mi">441</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">frontend</span>   <span class="c1">#    0.03% frontend cycles idle     (35.08%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">bpf</span><span class="o">-</span><span class="n">output</span>                <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">2</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.002 K/sec</span>
</span></span><span class="line"><span class="cl">          <span class="mi">1</span><span class="p">,</span><span class="mf">197.20</span> <span class="n">msec</span> <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span>                 <span class="c1">#    1.000 CPUs utilized</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">140</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.117 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">140</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.117 K/sec</span>
</span></span><span class="line"><span class="cl">          <span class="mi">1</span><span class="p">,</span><span class="mf">197.20</span> <span class="n">msec</span> <span class="n">task</span><span class="o">-</span><span class="n">clock</span>                <span class="c1">#    1.000 CPUs utilized</span>
</span></span><span class="line"><span class="cl">       <span class="mi">205</span><span class="p">,</span><span class="mi">399</span><span class="p">,</span><span class="mi">817</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#   25.00% of all L1-dcache accesses  (35.08%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">821</span><span class="p">,</span><span class="mi">607</span><span class="p">,</span><span class="mi">081</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1">#  686.276 M/sec                    (35.08%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">10</span><span class="p">,</span><span class="mi">361</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.00% of all L1-icache accesses  (35.08%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">511</span><span class="p">,</span><span class="mi">080</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1">#  961.004 M/sec                    (30.07%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">6</span><span class="p">,</span><span class="mi">275</span>      <span class="n">LLC</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>           <span class="c1">#    0.00% of all LL-cache accesses  (30.07%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">loads</span>                 <span class="c1">#    0.000 K/sec                    (30.07%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">103</span><span class="p">,</span><span class="mi">368</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#    0.086 M/sec                    (30.07%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">821</span><span class="p">,</span><span class="mi">524</span><span class="p">,</span><span class="mi">106</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1">#  686.206 M/sec                    (30.07%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">15</span><span class="p">,</span><span class="mi">315</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.00% of all dTLB cache accesses  (30.07%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">821</span><span class="p">,</span><span class="mi">589</span><span class="p">,</span><span class="mi">564</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#  686.261 M/sec                    (30.07%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">1</span><span class="p">,</span><span class="mi">084</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.07% of all iTLB cache accesses  (30.07%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">1</span><span class="p">,</span><span class="mi">613</span><span class="p">,</span><span class="mi">786</span>      <span class="n">iTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    1.348 M/sec                    (29.89%)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#perf stat -e branch-misses,bus-cycles,cache-misses,cache-references,cpu-cycles,instructions,stalled-cycles-backend,stalled-cycles-frontend,alignment-faults,bpf-output,context-switches,cpu-clock,cpu-migrations,dummy,emulation-faults,major-faults,minor-faults,page-faults,task-clock,L1-dcache-load-misses,L1-dcache-loads,L1-icache-load-misses,L1-icache-loads,LLC-load-misses,LLC-loads,branch-load-misses,branch-loads,dTLB-load-misses,dTLB-loads,iTLB-load-misses,iTLB-loads  ./aftersort</span>
</span></span><span class="line"><span class="cl"><span class="mf">1.1949</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span> <span class="o">=</span> <span class="mi">314931600000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">           <span class="mi">656</span><span class="p">,</span><span class="mi">175</span>      <span class="n">branch</span><span class="o">-</span><span class="n">misses</span>                                                 <span class="p">(</span><span class="mf">29.91</span><span class="o">%</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">3</span><span class="p">,</span><span class="mi">293</span><span class="p">,</span><span class="mi">615</span><span class="p">,</span><span class="mi">450</span>      <span class="n">bus</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1"># 2748.397 M/sec                    (29.91%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">203</span><span class="p">,</span><span class="mi">683</span><span class="p">,</span><span class="mi">518</span>      <span class="n">cache</span><span class="o">-</span><span class="n">misses</span>              <span class="c1">#   24.631 % of all cache refs      (29.91%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">826</span><span class="p">,</span><span class="mi">934</span><span class="p">,</span><span class="mi">774</span>      <span class="n">cache</span><span class="o">-</span><span class="n">references</span>          <span class="c1">#  690.046 M/sec                    (29.91%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">3</span><span class="p">,</span><span class="mi">293</span><span class="p">,</span><span class="mi">560</span><span class="p">,</span><span class="mi">111</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">cycles</span>                <span class="c1">#    2.748 GHz                      (34.92%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">5</span><span class="p">,</span><span class="mi">732</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">288</span>      <span class="n">instructions</span>              <span class="c1">#    1.74  insn per cycle</span>
</span></span><span class="line"><span class="cl">                                                  <span class="c1">#    0.29  stalled cycles per insn  (34.91%)</span>
</span></span><span class="line"><span class="cl">     <span class="mi">1</span><span class="p">,</span><span class="mi">645</span><span class="p">,</span><span class="mi">938</span><span class="p">,</span><span class="mi">192</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">backend</span>    <span class="c1">#   49.97% backend cycles idle      (35.00%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">1</span><span class="p">,</span><span class="mi">757</span><span class="p">,</span><span class="mi">056</span>      <span class="n">stalled</span><span class="o">-</span><span class="n">cycles</span><span class="o">-</span><span class="n">frontend</span>   <span class="c1">#    0.05% frontend cycles idle     (35.05%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">alignment</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">bpf</span><span class="o">-</span><span class="n">output</span>                <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">2</span>      <span class="n">context</span><span class="o">-</span><span class="n">switches</span>          <span class="c1">#    0.002 K/sec</span>
</span></span><span class="line"><span class="cl">          <span class="mi">1</span><span class="p">,</span><span class="mf">198.38</span> <span class="n">msec</span> <span class="n">cpu</span><span class="o">-</span><span class="n">clock</span>                 <span class="c1">#    1.000 CPUs utilized</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">cpu</span><span class="o">-</span><span class="n">migrations</span>            <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">dummy</span>                     <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">emulation</span><span class="o">-</span><span class="n">faults</span>          <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">major</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.000 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">137</span>      <span class="n">minor</span><span class="o">-</span><span class="n">faults</span>              <span class="c1">#    0.114 K/sec</span>
</span></span><span class="line"><span class="cl">               <span class="mi">137</span>      <span class="n">page</span><span class="o">-</span><span class="n">faults</span>               <span class="c1">#    0.114 K/sec</span>
</span></span><span class="line"><span class="cl">          <span class="mi">1</span><span class="p">,</span><span class="mf">198.38</span> <span class="n">msec</span> <span class="n">task</span><span class="o">-</span><span class="n">clock</span>                <span class="c1">#    1.000 CPUs utilized</span>
</span></span><span class="line"><span class="cl">       <span class="mi">205</span><span class="p">,</span><span class="mi">557</span><span class="p">,</span><span class="mi">180</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#   25.00% of all L1-dcache accesses  (35.05%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">822</span><span class="p">,</span><span class="mi">366</span><span class="p">,</span><span class="mi">213</span>      <span class="n">L1</span><span class="o">-</span><span class="n">dcache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1">#  686.233 M/sec                    (35.04%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">12</span><span class="p">,</span><span class="mi">708</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>     <span class="c1">#    0.00% of all L1-icache accesses  (35.05%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">987</span><span class="p">,</span><span class="mi">422</span><span class="p">,</span><span class="mi">733</span>      <span class="n">L1</span><span class="o">-</span><span class="n">icache</span><span class="o">-</span><span class="n">loads</span>           <span class="c1">#  823.967 M/sec                    (30.04%)</span>
</span></span><span class="line"><span class="cl">             <span class="mi">6</span><span class="p">,</span><span class="mi">234</span>      <span class="n">LLC</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>           <span class="c1">#    0.00% of all LL-cache accesses  (30.04%)</span>
</span></span><span class="line"><span class="cl">                 <span class="mi">0</span>      <span class="n">LLC</span><span class="o">-</span><span class="n">loads</span>                 <span class="c1">#    0.000 K/sec                    (30.04%)</span>
</span></span><span class="line"><span class="cl">           <span class="mi">103</span><span class="p">,</span><span class="mi">635</span>      <span class="n">branch</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>        <span class="c1">#    0.086 M/sec                    (30.04%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">822</span><span class="p">,</span><span class="mi">357</span><span class="p">,</span><span class="mi">251</span>      <span class="n">branch</span><span class="o">-</span><span class="n">loads</span>              <span class="c1">#  686.226 M/sec                    (30.04%)</span>
</span></span><span class="line"><span class="cl">            <span class="mi">13</span><span class="p">,</span><span class="mi">961</span>      <span class="n">dTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.00% of all dTLB cache accesses  (30.04%)</span>
</span></span><span class="line"><span class="cl">       <span class="mi">822</span><span class="p">,</span><span class="mi">374</span><span class="p">,</span><span class="mi">897</span>      <span class="n">dTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#  686.241 M/sec                    (30.04%)</span>
</span></span><span class="line"><span class="cl">               <span class="mi">709</span>      <span class="n">iTLB</span><span class="o">-</span><span class="nb">load</span><span class="o">-</span><span class="n">misses</span>          <span class="c1">#    0.05% of all iTLB cache accesses  (30.04%)</span>
</span></span><span class="line"><span class="cl">         <span class="mi">1</span><span class="p">,</span><span class="mi">562</span><span class="p">,</span><span class="mi">083</span>      <span class="n">iTLB</span><span class="o">-</span><span class="n">loads</span>                <span class="c1">#    1.303 M/sec                    (29.96%)</span></span></span></code></pre>
</div>
<p>可以看到在M710上开启 O3 优化后是否排序执行时间差不多，并且都比没有 O3 前</p>
<p>的快几倍，最明显的是指令数只有之前的7%。另外就是排序前的 branch-load-misses 几乎都被优化掉了，虽然这里 IPC 提升不大但主要在指令数的减少上。</p>
<p>O3意味着代码尽可能展开，更长的代码意味着对 L1i（以及 L2和更高级别）高速缓存的压力更高。这会导致性能降低。更短的代码可以运行得更快。幸运的是，gcc 有一个优化选项可以指定此项。如果使用-Os，则编译器将优化代码大小。使用后，能够增加代码大小的哪些优化将被禁用。使用此选项通常会产生令人惊讶的结果。特别是循环展开和内联没有实质优势时，那么此选项将是一个很好的选择。</p>
<h2 id="分支预测原理介绍" class="headerLink">
    <a href="#%e5%88%86%e6%94%af%e9%a2%84%e6%b5%8b%e5%8e%9f%e7%90%86%e4%bb%8b%e7%bb%8d" class="header-mark"></a>分支预测原理介绍</h2><p><img class="tw-inline" loading="lazy" src=https://cdn.jsdelivr.net/gh/plantegg/plantegg.github.io/images/951413iMgBlog/v2-475f184ea376484878515491a120bf49_1440w.png   alt="img"  ></p>
<p>如上图的上面部分代表通常情况下的简单代码布局。如果区域 B（这里是内联函数 inlfct 生成的代码）经常由于条件 I 被跳过，而不会执行，处理器的预取将拉入很少使用的包含块 B 的高速缓存行。使用块重新排序可以改变这种局面，改变之后的效果可以在图的下半部分看到。经常执行的代码在内存中是线性的，而很少执行的代码被移动到不会损害预取和 L1i 效率的位置。</p>
<h2 id="linux内核流水线优化案例" class="headerLink">
    <a href="#linux%e5%86%85%e6%a0%b8%e6%b5%81%e6%b0%b4%e7%ba%bf%e4%bc%98%e5%8c%96%e6%a1%88%e4%be%8b" class="header-mark"></a>Linux内核流水线优化案例</h2><p>在Linux Kernel中有大量的 likely/unlikely</p>
<div class="code-block highlight is-open show-line-numbers  tw-group tw-my-2">
  <div class="
    code-block-title 
    
    tw-flex 
    tw-flex-row 
    tw-justify-between 
    tw-w-full tw-bg-bgColor-secondary
    ">      
    <button 
      class="
        tw-select-none 
        tw-mx-2 
        tw-block
        group-[.is-open]:tw-rotate-90
        tw-transition-[transform] 
        tw-duration-500 
        tw-ease-in-out
        print:!tw-hidden"
      disabled
      aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></button>

    <div class="code-block-title-bar tw-w-full">
      <p class="tw-select-none !tw-my-1">c</p>
    </div>
    <div class="tw-flex">
      <button 
        class="
          line-number-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.show-line-numbers]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle line numbers"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"/></svg></button>

      <button 
        class="
          wrap-code-button
          tw-select-none 
          tw-mx-2 
          tw-hidden 
          group-[.is-open]:tw-block 
          group-[.is-wrap]:tw-text-fgColor-link 
          print:!tw-hidden" 
        title="Toggle code wrap"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></button>
      
      <button 
        class="
          copy-code-button
          tw-select-none
          tw-mx-2 
          tw-hidden
          group-[.is-open]:tw-block
          hover:tw-text-fgColor-link 
          print:!tw-hidden"
        title="Copy code">
          <span class="copy-icon tw-block"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg></span>
          <span class="check-icon tw-hidden"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg></span>
      </button>
        
      <button 
        class="
          tw-select-none 
          tw-mx-2 
          tw-block 
          group-[.is-open]:tw-hidden 
          print:!tw-hidden" 
        disabled
        aria-hidden="true"><svg class="icon"
    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"/></svg></button>
    </div>
  </div>
  <pre style="counter-reset: codeblock;" class="tw-block tw-m-0 tw-p-0"><code 
    id="codeblock-id-15" 
    class="
      chroma 
      !tw-block 
      tw-p-0
      tw-m-0
      tw-transition-[max-height] 
      tw-duration-500 
      tw-ease-in-out 
      group-[.is-closed]:!tw-max-h-0 
      group-[.is-wrap]:tw-text-wrap
      tw-overflow-y-hidden
      tw-overflow-x-auto
      tw-scrollbar-thin
      "><span class="line"><span class="cl"><span class="c1">//ip 层收到消息后，如果是tcp就调用tcp_v4_rcv作为tcp协议的入口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">tcp_v4_rcv</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">(</span><span class="nf">unlikely</span><span class="p">(</span><span class="n">th</span><span class="o">-&gt;</span><span class="n">doff</span> <span class="o">&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">tcphdr</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="k">goto</span> <span class="n">bad_packet</span><span class="p">;</span> <span class="c1">//概率很小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nf">pskb_may_pull</span><span class="p">(</span><span class="n">skb</span><span class="p">,</span> <span class="n">th</span><span class="o">-&gt;</span><span class="n">doff</span> <span class="o">*</span> <span class="mi">4</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="k">goto</span> <span class="n">discard_it</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="c1">//file: net/ipv4/tcp_input.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="nf">tcp_rcv_established</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="n">sk</span><span class="p">,</span> <span class="p">...)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="k">if</span> <span class="p">(</span><span class="nf">unlikely</span><span class="p">(</span><span class="n">sk</span><span class="o">-&gt;</span><span class="n">sk_rx_dst</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">......</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//file: include/linux/compiler.h
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define likely(x)   __builtin_expect(!!(x),1)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define unlikely(x) __builtin_expect(!!(x),0)</span></span></span></code></pre>
</div>
<p>__builtin_expect 这个指令是 gcc 引入的。该函数作用是允许程序员将最有可能执行的分支告诉编译器，来辅助系统进行分支预测。(参见 <a href="https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html" target="_blank" rel="noopener noreferrer">https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html</a>)</p>
<p>它的用法为：__builtin_expect(EXP, N)。意思是：EXP == N的概率很大。那么上面 likely 和 unlikely 这两句的具体含义就是：</p>
<ul>
<li>__builtin_expect(!!(x),1) x 为真的可能性更大  //0两次取反还是0，非0两次取反都是1，这样可以适配__builtin_expect(EXP, N)的N，要不N的参数没法传</li>
<li>__builtin_expect(!!(x),0) x 为假的可能性更大</li>
</ul>
<p>当正确地使用了__builtin_expect后，编译器在编译过程中会根据程序员的指令，将可能性更大的代码紧跟着前面的代码，从而减少指令跳转带来的性能上的下降。让L1i中加载的代码尽量有效紧凑</p>
<p>这样可以让 CPU流水线分支预测的时候默认走可能性更大的分支。如果分支预测错误所有流水线都要取消重新计算。</p>
<p>如果程序员利用这些宏，然后使用 <code>-freorder-blocks</code> 优化选项，则 gcc 将对块进行重新排序，如原理解图所示。该选项在 -O 2中启用，但在-Os 中禁用。还有另一种对块进行重新排序的选项（<code>-freorder-blocks-and-partition</code> ），但是它的用处有限，因为它不适用于异常处理。</p>
<h2 id="总结" class="headerLink">
    <a href="#%e6%80%bb%e7%bb%93" class="header-mark"></a>总结</h2><p>不排序的代码(分支极难预测正确)运行数据对比：</p>

<div class="table-wrapper">
  <table>
    <thead>
        <tr>
            <th style="text-align: "></th>
            <th style="text-align: ">branch-load-misses/branch-loads</th>
            <th style="text-align: ">instructions</th>
            <th style="text-align: ">IPC</th>
            <th style="text-align: ">耗时(秒)</th>
            <th style="text-align: ">排序后耗时(秒)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: ">鲲鹏920</td>
            <td style="text-align: ">21.7%</td>
            <td style="text-align: ">83,694,841,472</td>
            <td style="text-align: ">1.04</td>
            <td style="text-align: ">30.92</td>
            <td style="text-align: ">11.44</td>
        </tr>
        <tr>
            <td style="text-align: ">M710</td>
            <td style="text-align: ">8.3%</td>
            <td style="text-align: ">77,083,625,280</td>
            <td style="text-align: ">1.66</td>
            <td style="text-align: ">16.89</td>
            <td style="text-align: ">8.20</td>
        </tr>
        <tr>
            <td style="text-align: ">Intel 8163</td>
            <td style="text-align: ">24.4%</td>
            <td style="text-align: ">29,618,485,912</td>
            <td style="text-align: ">0.41</td>
            <td style="text-align: ">29.52</td>
            <td style="text-align: ">9.77</td>
        </tr>
        <tr>
            <td style="text-align: ">hygon 7260</td>
            <td style="text-align: ">11.8%</td>
            <td style="text-align: ">32,850,416,330</td>
            <td style="text-align: ">0.56</td>
            <td style="text-align: ">23.36</td>
            <td style="text-align: ">10.95</td>
        </tr>
        <tr>
            <td style="text-align: ">FT S2500</td>
            <td style="text-align: ">24%</td>
            <td style="text-align: ">83,872,213,462</td>
            <td style="text-align: ">1.01</td>
            <td style="text-align: ">39.8</td>
            <td style="text-align: ">16.63</td>
        </tr>
    </tbody>
  </table>
</div>
<p>排序后的代码(分支预测容易)运行数据对比：</p>

<div class="table-wrapper">
  <table>
    <thead>
        <tr>
            <th style="text-align: "></th>
            <th style="text-align: ">instructions</th>
            <th style="text-align: ">instructions(排序前)</th>
            <th style="text-align: ">IPC</th>
            <th style="text-align: ">耗时(秒)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align: ">鲲鹏920</td>
            <td style="text-align: ">83,666,813,837</td>
            <td style="text-align: ">83,694,841,472</td>
            <td style="text-align: ">2.82</td>
            <td style="text-align: ">11.44</td>
        </tr>
        <tr>
            <td style="text-align: ">M710</td>
            <td style="text-align: ">77,068,271,833</td>
            <td style="text-align: ">77,083,625,280</td>
            <td style="text-align: ">3.42</td>
            <td style="text-align: ">8.20</td>
        </tr>
        <tr>
            <td style="text-align: ">Intel 8163</td>
            <td style="text-align: ">29,491,804,977</td>
            <td style="text-align: ">29,618,485,912</td>
            <td style="text-align: ">1.22</td>
            <td style="text-align: ">9.77</td>
        </tr>
        <tr>
            <td style="text-align: ">hygon 7260</td>
            <td style="text-align: ">32,785,270,866</td>
            <td style="text-align: ">32,850,416,330</td>
            <td style="text-align: ">1.20</td>
            <td style="text-align: ">10.95</td>
        </tr>
        <tr>
            <td style="text-align: ">FT S2500</td>
            <td style="text-align: ">83,918,069,835</td>
            <td style="text-align: ">83,872,213,462</td>
            <td style="text-align: ">2.41</td>
            <td style="text-align: ">16.63</td>
        </tr>
    </tbody>
  </table>
</div>
<ul>
<li>所有 CPU 都期望对分支预测友好的代码</li>
<li>分支预测重点关注 perf branch-load-misses/branch-loads</li>
<li>aarch64 较 x86_64 指令数是2.6倍，同时对流水线更友好，也就是 IPC 更高(2.6倍)，测试代码单线程、无锁</li>
<li>M710的分支预测正确率是鲲鹏920、intel的3倍，hygon 是鲲鹏 、intel的分支预测率的2倍</li>
<li>10% 的分支load miss 会带来一倍的性能差异</li>
<li>gcc O3 优化效果很明显，代价就是代码展开后很大，容易造成icache不够，对小段测试代码效果最好，实践不一定</li>
<li>测试代码只是极简场景，实际生产环境更复杂，也就是预测效果不会这么明显</li>
</ul>
]]></description>
</item></channel>
</rss>
